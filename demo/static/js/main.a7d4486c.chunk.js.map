{"version":3,"sources":["label/demo-assets/demo.jpg","label/demo-assets/semantic-segmentation.json.resp","label/demo-assets/object-detection.json.resp","help/tutorial/labeling-interface-annotated.png","help/tutorial/labels.png","help/tutorial/bbox-labeling.gif","help/tutorial/polygon-labeling.gif","help/tutorial/add-new-point.png","help/tutorial/show-and-hide-layer.gif","help/tutorial/change-layer.gif","help/tutorial/auto-tracing.gif","help/tutorial/nav.png","help/tutorial/toolbar.png","help/tutorial/ml-object-description.gif","help/tutorial/ml-object-detection.gif","help/tutorial/ml-semantic-segmentation.gif","help/tutorial/project-page.png","help/tutorial/project-images.png","help/tutorial/project-data.png","help/tutorial/project-reference.png","help/tutorial/project-reference-interface.png","help/tutorial/project-ml-assist.png","common/Menubar.js","common/ProjectsGrid.js","label/LabelHome.js","label/Figure.js","label/utils.js","label/CalcBoundsHOC.js","label/Canvas.js","label/HotkeysPanel.js","label/Sidebar.js","label/CanvasToolbar.js","label/Reference.js","image-processing/MaxHeap.js","image-processing/LiveWire.js","image-processing/Dijkstra.js","image-processing/Segmentation.js","label/tracing.js","label/MakePredictionsHOC.js","label/LabelingApp.js","label/LoadImageDataHOC.js","label/LabelingAppHistoryHOC.js","label/demo.js","label/LabelingLoader.js","label/OverScreen.js","admin/ProjectImages.js","admin/UploadImages.js","admin/LabelFormItem.js","admin/ImportData.js","admin/UploadReference.js","admin/MLAssist.js","admin/ProjectPage.js","admin/AdminApp.js","help/Help.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Menubar","active","this","props","react_default","a","createElement","style","background","minHeight","Menu","inverted","Container","Item","header","Link","to","Icon","name","marginRight","children","Component","ProjectsGrid","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","error","isLoaded","projects","onNewProject","bind","assertThisInitialized","fetch","json","setState","_context","t0","method","newProjectRes","newProject","concat","_this$state","_this$props","linkPrefix","newButton","title","message","Loader","inline","renderedButton","Button","padding","onClick","fontSize","Header","as","Grid","stackable","columns","map","project","id","form","imagesCount","labelsCount","info","desc","formParts","part","join","Column","key","Card","fluid","link","meta","description","Figure","dragging","draggedPoint","i","point","Polygon","points","guides","calculateGuides","color","options","pos","Polyline","positions","opacity","dashArray","_this2","figure","skipNextClick","editing","finished","sketch","vertexColor","interactive","onSelect","renderPoints","getRenderPoints","lineColor","fillColor","weight","classes","push","vcolor","vertices","CircleMarker","className","center","fillOpacity","radius","onPointClick","draggable","onDrag","e","target","getLatLng","index","onDragstart","onDragend","onPointMoved","fill","fillRule","guideLines","makeGuides","PolyComp","leafletComponent","react","hasFill","makeExtraElements","PolygonFigure","_Figure","_this3","inherits","createClass","value","_this$props2","newPoint","length","additionalGuides","_this$props3","calcDistance","onChange","filter","_ref","_ref2","slicedToArray","b","_ref3","_ref4","midPoint","onMousedown","_this$props4","_this$props5","BBoxFigure","_Figure2","apply","arguments","_this$props6","oppPoint","sidePoint1","lat","lng","sidePoint2","_points","p1","p2","_this$props7","_figure$points","colorMapping","red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","gray","black","genId","Math","random","toString","substring","colors","maxZoom","withBounds","Comp","CalcBoundsLayer","_PureComponent","crs","CRS","Simple","height","width","southWest","unproject","x","y","northEast","LatLngBounds","forwardedRef","rest","objectWithoutProperties","bounds","calcBounds","assign","ref","PureComponent","forwardRef","Canvas","context","zoom","selectedFigureId","cursorPos","prevSelectedFigure","skipNextClickEvent","mapRef","React","createRef","handleChange","handleClick","prevProps","onSelectionChange","prevSelectedFigureId","figures","find","f","eventType","unfinishedFigure","drawing","newState","update","$push","$set","$splice","Error","latlng","type","url","onReassignment","current","leafletElement","latLngToLayerPoint","distanceTo","unfinishedDrawingDOM","renderFigure","getColor","tracingOptions","enabled","col","amt","usePound","slice","num","parseInt","r","g","lighten","figuresDOM","hotkeysDOM","es","keyName","onKeyDown","tagName","document","activeElement","toLowerCase","includes","getSelectedFigure","panBy","setZoom","getZoom","renderedTrace","selectedFigure","trace","traceOptions","Figure_PolygonFigure","objectSpread","cursor","es_Map","minZoom","zoomAnimation","zoomSnap","zoomControl","keyboard","attributionControl","onZoom","onMousemove","ZoomControl","position","control_default","role","href","setView","fitted","ImageOverlay","overflowY","overflowX","borderRight","headerIconStyle","float","HotkeysPanel","labels","onClose","labelHotkeys","label","Table","Row","Cell","attached","Segment","celled","HeaderCell","Body","Sidebar","selected","toggles","onToggle","openHotkeys","onBack","onSkip","onSubmit","labelData","onFormChange","models","makePrediction","hotkeysButton","getSelectHandler","display","flexDirection","size","flex","List","divided","selection","shortcut","_ref2$selected","_ref2$disabled","disabled","_ref2$isToggled","isToggled","icons","typeHidable","icon","stopPropagation","iconType","iconMapping","figureIcon","marginLeft","Label","horizontal","sublistStyle","filteredModels","text","fillInDOM","Select","placeholder","_ref6","asyncToGenerator","regenerator_default","mark","_callee","_ref5","m","wrap","prev","next","_ref7","sent","stop","_x","_x2","Form","Input","prompt","_ref8","option","_ref9","checked","items","Checkbox","indexOf","Radio","_ref10","genSublist","ListItem","secondary","primary","bbox","polygon","select","select-one","defaultStyle","borderBottom","smoothingOptions","precisionOptions","selectStyle","groupStyle","PathToolbar","smoothing","precision","selectProps","compact","toggle","predictionSmoothingOptions","lastSelected","MakePredictionToolbar","_Component","model","loading","_handleGenerate","generate","defineProperty","smoothingSelect","handleGenerate","containerStyle","maxHeight","textAlign","imageStyle","margin","renderReference","referenceLink","referenceText","img","alt","src","MinHeap","_MaxHeap","comparator","get","prototype","MaxHeap","undefined","_comparator","_heapIdx","Map","_heap","Array","isArray","initData","_initFromData","data","forEach","set","parentIdx","_downHeap","idx","leftChildIdx","left","right","rightChildIdx","largest","_maxIndex","_swap","parent","idxA","idxB","valueA","_get","valueB","recA","recB","has","_upHeap","last","pop","delete","iterator","obj","def","defaultMarkRadius","computePath","imageData","markRadius","pointToId","idToPoint","floor","minPoint","maxPoint","idsSets","dx","dy","inBounds","ps","Set","getPaths","startingSet","startingDistances","endSet","Infinity","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","done","min","max","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","calcCost","c","d","sum","aveA","aveB","diff","abs","distanceFn","neighborsFn","queue","fromId","finalDistances","dist","leftSet","entries","_loop","minElementId","remove","nid","ndist","delta","add","empty","from","path","curId","reverse","distance","dijkstra","pa","pb","cost","j","prevDistances","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","pathsSets","currentSet","paths","pathId","minDist","totalPath","pathsSet","selectedPath","DIR","DOWN","LEFT","UP","RIGHT","turnDirection","vectorize","start","used","matrix","n","q","area","front","cur","di","direction","getMask","_pos","_start","sy","sx","mask","nDirection","computeTrace","LineUtil","simplify","vectorizeSegmentation","scaling","row","vectors","v","computeVectorized","channels","LabelingApp","reassigning","status","hotkeysPanel","handleSelected","handleSelectionChange","canvasRef","pushState","labelIdx","findIndex","figureId","newLabelId","imageInfo","_update4","_this4","imageUrl","reference","popState","forwardedProps","allFigures","__temp","sidebarProps","labelId","newValue","hotkeysPanelDOM","toolbarDOM","toolbarStyle","top","zIndex","CanvasToolbar_PathToolbar","property","CanvasToolbar_MakePredictionToolbar","preds","demoBar","demo","fontWeight","Sidebar_Sidebar","maxWidth","label_Canvas","withLoadImageData","LoadImageLayer","componentDidUpdate","prevState","Image","onload","resetImage","canvas","getElementById","ctx","getContext","scale","sHeight","sWidth","imageSmoothingQuality","imageSmoothingEnabled","drawImage","imgB64","toDataURL","getImageData","b64Scaling","readyState","addEventListener","HistoryLayer","keys","flipY","figuresHistory","unfinishedFigureHistory","transformPoints","onLabelChange","stateChange","cb","passedProps","withHistory","PredictionsLayer","_makePrediction","req","resp","_args","headers","Accept","Content-Type","body","JSON","stringify","instances","input_bytes","b64","predictions","_ref$det_boxes","det_boxes","y1","x1","y2","x2","modelId","abrupt","raw_image","_componentDidMount","_callee2","_context2","newProps","demoMocks","/api/getLabelingInfo","points2","ok","_json","image","originalName","demoImg","externalLink","localPath","labeled","mzs64divv","lastEdited","projectsId","/api/mlmodels","_json2","/api/mlmodels/1","objectDetectionResponse","/api/mlmodels/2","semanticSegmentationResponse","/api/images/1","LabelingLoader","projectId","match","params","args","pathname","refetch","imageId","history","setAttribute","URL","searchParams","append","replace","goBack","markComplete","pushUpdate","dist_default","src_label_LabelingApp","ProjectImages","images","handleLabeled","handleDelete","markAllNotLabeled","nextProps","nextState","shallowEqualObjects","refetchRef","columnStyles","border","outline","ProjectImages_AutoSizedList","rowHeight","rowCount","rowRenderer","ProjectImages_Row","onLabeled","onDelete","overscanRowCount","lineHeight","rel","AutoSizedList","dist_es","UploadImages","urlsText","urlsError","localPathError","handleSubmit","handlePathSubmit","handleFilesSubmit","change","urls","trim","split","line","preventDefault","formData","FormData","reset","urlsMessage","Message","negative","localPathMessage","relaxed","encType","multiple","accept","verticalAlign","TextArea","rows","Divider","vertical","dragHandleStyle","minWidth","DragHandle","sortableHandle","ImportData","res","loader","messages","marginTop","UploadReference","uploadError","handleFileSubmit","onUpload","uploadErrorMessage","preview","action","autoHeight","defaultValue","outputFormats","object_detection","object_classification","semantic_segmentation","MLAssist","currentValue","reload","_this$state2","emptyMessage","ProjectPage","onSortEnd","handleNew","handleNameChange","handleReferenceChange","oldIndex","newIndex","arrayMove","oldValue","edit","newFormPart","renderedItems","SortableItem","paddingBottom","control","window","location","origin","SortableContainer","useDragHandle","circular","ProjectImages_ProjectImages","handleImagesChange","UploadImages_UploadImages","ImportData_ImportData","componentDidMount","UploadReference_UploadReference","MLAssist_MLAssist","alignSelf","boxShadow","sortableElement","extraConfig","renderedOptions","optionText","tabIndex","renderExtraConfig","shadow","Field","sortableContainer","substr","Img","caption","sections","comp","labelingInterfaceAnnotatedImg","labelsImg","showAndHideLayerImg","bboxLabelingImg","polygonLabelingImg","addNewPointImg","changeLayerImg","navImg","toolbarImg","autoTracingImg","mlObjectDetectionImg","mlSemanticSegmentationImg","mlObjectDescriptionImg","projectPageImg","projectImagesImg","projectDataImg","projectReferenceImg","projectReferenceInterfaceImg","projectMlAssistImg","App","LabelingLoader_LabelingLoader","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.a7d4486c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/demo.6318aa84.jpg\";","module.exports = __webpack_public_path__ + \"static/media/semantic-segmentation.json.a51c4372.resp\";","module.exports = __webpack_public_path__ + \"static/media/object-detection.json.b776f784.resp\";","module.exports = __webpack_public_path__ + \"static/media/labeling-interface-annotated.7229b60a.png\";","module.exports = __webpack_public_path__ + \"static/media/labels.dc5b1f59.png\";","module.exports = __webpack_public_path__ + \"static/media/bbox-labeling.9e5e9969.gif\";","module.exports = __webpack_public_path__ + \"static/media/polygon-labeling.27bf4f58.gif\";","module.exports = __webpack_public_path__ + \"static/media/add-new-point.0a9ce62a.png\";","module.exports = __webpack_public_path__ + \"static/media/show-and-hide-layer.b68524e5.gif\";","module.exports = __webpack_public_path__ + \"static/media/change-layer.57058590.gif\";","module.exports = __webpack_public_path__ + \"static/media/auto-tracing.b56cc456.gif\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/toolbar.23a4dcfc.png\";","module.exports = __webpack_public_path__ + \"static/media/ml-object-description.a23f25f8.gif\";","module.exports = __webpack_public_path__ + \"static/media/ml-object-detection.8dadc923.gif\";","module.exports = __webpack_public_path__ + \"static/media/ml-semantic-segmentation.8f4eba9f.gif\";","module.exports = __webpack_public_path__ + \"static/media/project-page.c1623ee4.png\";","module.exports = __webpack_public_path__ + \"static/media/project-images.f040ae73.png\";","module.exports = __webpack_public_path__ + \"static/media/project-data.a05cc073.png\";","module.exports = __webpack_public_path__ + \"static/media/project-reference.81a878d9.png\";","module.exports = __webpack_public_path__ + \"static/media/project-reference-interface.2e520ab6.png\";","module.exports = __webpack_public_path__ + \"static/media/project-ml-assist.6f2dc06b.png\";","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { Container, Menu, Icon } from 'semantic-ui-react';\n\nexport default class Menubar extends Component {\n  render() {\n    const { active } = this.props;\n    return (\n      <div style={{ background: '#f7f7f7', minHeight: '100vh' }}>\n        <Menu inverted>\n          <Container>\n            <Menu.Item header>Image Labeling</Menu.Item>\n            <Link to=\"/\">\n              <Menu.Item active={active === 'label'}>\n                <Icon name=\"tag\" style={{ marginRight: '5px' }} />\n                Label\n              </Menu.Item>\n            </Link>\n            <Link to=\"/admin/\">\n              <Menu.Item active={active === 'admin'}>\n                <Icon name=\"pencil\" style={{ marginRight: '5px' }} />\n                Admin\n              </Menu.Item>\n            </Link>\n            <Link to=\"/help/\">\n              <Menu.Item active={active === 'help'}>\n                <Icon name=\"help circle\" style={{ marginRight: '5px' }} />\n                Help\n              </Menu.Item>\n            </Link>\n          </Container>\n        </Menu>\n\n        <Container>{this.props.children}</Container>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Grid, Button, Loader, Header } from 'semantic-ui-react';\n\nexport default class ProjectsGrid extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      projects: [],\n    };\n\n    this.onNewProject = this.onNewProject.bind(this);\n  }\n\n  async componentDidMount() {\n    try {\n      const projects = await (await fetch('/api/projects/')).json();\n      this.setState({\n        isLoaded: true,\n        projects,\n      });\n    } catch (error) {\n      this.setState({\n        isLoaded: true,\n        error,\n      });\n    }\n  }\n\n  async onNewProject() {\n    const newProjectRes = await fetch('/api/projects', { method: 'POST' });\n    const newProject = await newProjectRes.json();\n    this.setState({\n      projects: this.state.projects.concat([newProject]),\n    });\n  }\n\n  render() {\n    const { error, isLoaded, projects } = this.state;\n    const { linkPrefix, newButton, title } = this.props;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <Loader active inline=\"centered\" />;\n    }\n\n    const renderProjectCard = project => {\n      const { id, name, form, imagesCount, labelsCount } = project;\n      const info = `${imagesCount} images, ${labelsCount} labeled`;\n      const desc = `Tags: ${form.formParts.map(part => part.name).join(', ')}`;\n      return (\n        <Grid.Column key={id}>\n          <Link to={`${linkPrefix}${id}`}>\n            <Card fluid link header={name} meta={info} description={desc} />\n          </Link>\n        </Grid.Column>\n      );\n    };\n\n    const renderedButton = newButton ? (\n      <Button style={{ padding: '1.5em' }} onClick={this.onNewProject}>\n        <span style={{ fontSize: '4em' }}>+</span>\n        <div>Make a new project</div>\n      </Button>\n    ) : null;\n\n    return (\n      <div>\n        <Header as=\"h1\">{title}</Header>\n        <Grid stackable columns={2}>\n          {projects.map(renderProjectCard)}\n          <Grid.Column>{renderedButton}</Grid.Column>\n        </Grid>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport Menubar from '../common/Menubar';\nimport ProjectsGrid from '../common/ProjectsGrid';\n\nexport default class LabelHome extends Component {\n  render() {\n    return (\n      <Menubar active=\"label\">\n        <ProjectsGrid\n          title=\"Start Labeling:\"\n          linkPrefix=\"/label/\"\n          newButton={false}\n        />\n      </Menubar>\n    );\n  }\n}\n","import React, { Component, Fragment } from 'react';\nimport { Polyline, Polygon, CircleMarker } from 'react-leaflet';\n\nclass Figure extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dragging: false,\n      draggedPoint: null,\n    };\n  }\n  // abstract\n  calculateGuides() {\n    return [];\n  }\n\n  // abstract\n  onPointClick(i) {}\n\n  // abstract\n  onPointMoved(point, i) {}\n\n  // abstract\n  makeExtraElements() {\n    return null;\n  }\n\n  // abstract\n  leafletComponent() {\n    return Polygon;\n  }\n\n  // abstract\n  getRenderPoints(points) {\n    return points;\n  }\n\n  makeGuides() {\n    const guides = this.calculateGuides();\n    const { color } = this.props.options;\n    return guides.map((pos, i) => (\n      <Polyline\n        key={i}\n        positions={pos}\n        color={color}\n        opacity={0.7}\n        dashArray=\"5\"\n      />\n    ));\n  }\n\n  hasFill() {\n    return true;\n  }\n\n  render() {\n    const { figure, options, skipNextClick } = this.props;\n    const { id, points } = figure;\n    const {\n      editing,\n      finished,\n      sketch,\n      color,\n      vertexColor,\n      interactive,\n      onSelect,\n    } = options;\n    const { draggedPoint } = this.state;\n\n    const renderPoints = this.getRenderPoints(points);\n\n    const dashArray = editing ? '10' : '1';\n\n    const lineColor = editing && sketch ? color : vertexColor || color;\n    const fillColor = editing && sketch ? 'rgba(0,0,0,0)' : color;\n    const weight = editing && sketch ? 2 : 3;\n\n    const classes = ['vertex'];\n    if (editing) classes.push('editing');\n    if (finished) classes.push('finished');\n\n    const vcolor = vertexColor || color;\n    const vertices = renderPoints.map((pos, i) => (\n      <CircleMarker\n        className={classes.concat(!i ? ['first'] : []).join(' ')}\n        key={id + '-' + i}\n        center={pos}\n        fillOpacity={0.0}\n        opacity={0.0}\n        radius={11}\n        onClick={() => this.onPointClick(i)}\n        draggable={editing}\n        onDrag={e => {\n          this.setState({\n            draggedPoint: { point: e.target.getLatLng(), index: i },\n          });\n        }}\n        onDragstart={e => this.setState({ dragging: true })}\n        onDragend={e => {\n          this.onPointMoved(e.target.getLatLng(), i);\n          this.setState({ dragging: false, draggedPoint: null });\n        }}\n      >\n        <CircleMarker\n          color={vcolor}\n          fill={true}\n          fillColor={vcolor}\n          fillRule=\"nonzero\"\n          fillOpacity={1.0}\n          radius={4}\n          center={\n            draggedPoint && draggedPoint.index === i ? draggedPoint.point : pos\n          }\n        />\n      </CircleMarker>\n    ));\n\n    const guideLines = this.makeGuides();\n    const PolyComp = this.leafletComponent();\n\n    return (\n      <Fragment key={id}>\n        <PolyComp\n          positions={renderPoints}\n          color={lineColor}\n          weight={weight}\n          fill={this.hasFill()}\n          fillColor={fillColor}\n          opacity={sketch ? '0.7' : '1.0'}\n          dashArray={dashArray}\n          interactive={id !== 'trace'} // always set interactive to true, to avoid bugs in leaflet-react\n          onClick={() => {\n            if (interactive) {\n              onSelect();\n              skipNextClick();\n            }\n          }}\n        />\n        {guideLines}\n        {this.makeExtraElements()}\n        {!finished || editing ? vertices : null}\n      </Fragment>\n    );\n  }\n}\n\nexport class PolygonFigure extends Figure {\n  constructor(props) {\n    super(props);\n\n    this.onPointClick = this.onPointClick.bind(this);\n  }\n\n  leafletComponent() {\n    const {\n      options: { finished },\n    } = this.props;\n    return finished ? Polygon : Polyline;\n  }\n\n  calculateGuides() {\n    const { figure, options } = this.props;\n    const { points } = figure;\n    const { newPoint, finished } = options;\n    const { draggedPoint } = this.state;\n\n    const guides = [];\n    if (draggedPoint) {\n      const { point, index } = draggedPoint;\n      const { length } = points;\n      guides.push(\n        [point, points[(index + 1) % length]],\n        [point, points[(index - 1 + length) % length]]\n      );\n    }\n\n    const additionalGuides =\n      !finished && points.length > 0\n        ? [[points[points.length - 1], newPoint]]\n        : [];\n\n    return guides.concat(additionalGuides);\n  }\n\n  makeExtraElements() {\n    const { figure, options, skipNextClick } = this.props;\n    const { id, points } = figure;\n    const { editing, finished, calcDistance, onChange } = options;\n\n    const { dragging } = this.state;\n\n    if (!finished || !editing || dragging) {\n      return [];\n    }\n\n    const midPoints = points\n      .map((pos, i) => [pos, points[(i + 1) % points.length], i])\n      .filter(([a, b]) => calcDistance(a, b) > 40)\n      .map(([a, b, i]) => (\n        <CircleMarker\n          key={id + '-' + i + '-mid'}\n          className=\"midpoint\"\n          center={midPoint(a, b)}\n          radius={8}\n          opacity={0.0}\n          fillOpacity={0.0}\n          onMousedown={e => {\n            onChange('add', { point: midPoint(a, b), pos: i + 1, figure });\n            skipNextClick();\n          }}\n        >\n          <CircleMarker\n            radius={3}\n            color=\"white\"\n            fill={true}\n            fillOpacity={0.5}\n            opacity={0.5}\n            center={midPoint(a, b)}\n          />\n        </CircleMarker>\n      ));\n\n    return midPoints;\n  }\n\n  onPointMoved(point, index) {\n    const {\n      figure,\n      options: { onChange },\n    } = this.props;\n    onChange('move', { point, pos: index, figure });\n  }\n\n  onPointClick(i) {\n    const { figure, options, skipNextClick } = this.props;\n    const { points } = figure;\n    const { finished, editing, onChange } = options;\n\n    if (!finished && i === 0) {\n      if (points.length >= 3) {\n        onChange('end', {});\n      }\n      skipNextClick();\n      return false;\n    }\n\n    if (finished && editing) {\n      if (points.length > 3) {\n        onChange('remove', { pos: i, figure });\n      }\n      skipNextClick();\n      return false;\n    }\n  }\n}\n\nexport class BBoxFigure extends Figure {\n  calculateGuides() {\n    const { figure, options } = this.props;\n    const { points } = figure;\n    const { newPoint, finished } = options;\n    const { draggedPoint } = this.state;\n\n    if (draggedPoint) {\n      const renderPoints = this.getRenderPoints(points);\n      const { point, index } = draggedPoint;\n      const oppPoint = renderPoints[(index + 2) % renderPoints.length];\n      const sidePoint1 = { lat: oppPoint.lat, lng: point.lng };\n      const sidePoint2 = { lat: point.lat, lng: oppPoint.lng };\n      return [\n        [point, sidePoint1],\n        [sidePoint1, oppPoint],\n        [point, sidePoint2],\n        [sidePoint2, oppPoint],\n      ];\n    }\n\n    if (!finished && points.length > 0) {\n      const renderPoints = this.getRenderPoints([points[0], newPoint]);\n      return [\n        [renderPoints[0], renderPoints[1]],\n        [renderPoints[1], renderPoints[2]],\n        [renderPoints[2], renderPoints[3]],\n        [renderPoints[3], renderPoints[0]],\n      ];\n    }\n\n    return [];\n  }\n\n  getRenderPoints(points) {\n    const [p1, p2] = points;\n    if (!p1) {\n      return [];\n    }\n    if (!p2) {\n      return [p1];\n    }\n\n    return [\n      { lat: p1.lat, lng: p1.lng },\n      { lat: p1.lat, lng: p2.lng },\n      { lat: p2.lat, lng: p2.lng },\n      { lat: p2.lat, lng: p1.lng },\n    ];\n  }\n\n  onPointMoved(point, index) {\n    const {\n      figure,\n      options: { onChange },\n    } = this.props;\n    if (index === 0 || index === 2) {\n      onChange('move', { point, pos: index / 2, figure });\n    } else {\n      const [p1, p2] = figure.points;\n\n      const points =\n        index === 1\n          ? [{ lat: point.lat, lng: p1.lng }, { lat: p2.lat, lng: point.lng }]\n          : [{ lat: p1.lat, lng: point.lng }, { lat: point.lat, lng: p2.lng }];\n\n      onChange('replace', { points, figure });\n    }\n  }\n}\n\nfunction midPoint(p1, p2) {\n  return {\n    lat: (p1.lat + p2.lat) / 2,\n    lng: (p1.lng + p2.lng) / 2,\n  };\n}\n","export const colorMapping = {\n  red: '#B03060',\n  orange: '#FE9A76',\n  yellow: '#FFD700',\n  olive: '#32CD32',\n  green: '#016936',\n  teal: '#008080',\n  blue: '#0E6EB8',\n  violet: '#EE82EE',\n  purple: '#B413EC',\n  pink: '#FF1493',\n  brown: '#A52A2A',\n  gray: '#A0A0A0',\n  black: '#000000',\n};\n\nexport function convertPoint(p) {\n  return {\n    lat: p.lat,\n    lng: p.lng,\n  };\n}\n\nexport function lighten(col, amt) {\n  let usePound = false;\n  if (col[0] === '#') {\n    col = col.slice(1);\n    usePound = true;\n  }\n  const num = parseInt(col, 16);\n  let r = (num >> 16) + amt;\n  if (r > 255) r = 255;\n  else if (r < 0) r = 0;\n  let b = ((num >> 8) & 0x00ff) + amt;\n  if (b > 255) b = 255;\n  else if (b < 0) b = 0;\n  let g = (num & 0x0000ff) + amt;\n  if (g > 255) g = 255;\n  else if (g < 0) g = 0;\n  return (usePound ? '#' : '') + (g | (b << 8) | (r << 16)).toString(16);\n}\n\nexport function genId() {\n  return (\n    Math.random()\n      .toString(36)\n      .substring(2, 15) +\n    Math.random()\n      .toString(36)\n      .substring(2, 15)\n  );\n}\n\nexport const shortcuts = '1234567890qwe';\nexport const colors = [\n  'red',\n  'blue',\n  'green',\n  'violet',\n  'orange',\n  'brown',\n  'yellow',\n  'olive',\n  'teal',\n  'purple',\n  'pink',\n  'black',\n];\n","import React, { PureComponent, forwardRef } from 'react';\nimport { CRS, LatLngBounds } from 'leaflet';\n\nexport const maxZoom = 7;\nexport function withBounds(Comp) {\n  class CalcBoundsLayer extends PureComponent {\n    calcBounds() {\n      const crs = CRS.Simple;\n      const { height, width } = this.props;\n\n      if (!height || !width) return null;\n\n      const southWest = crs.unproject({ x: 0, y: height }, maxZoom - 1);\n      const northEast = crs.unproject({ x: width, y: 0 }, maxZoom - 1);\n      const bounds = new LatLngBounds(southWest, northEast);\n\n      return bounds;\n    }\n\n    render() {\n      const { forwardedRef, ...rest } = this.props;\n      const bounds = this.calcBounds();\n      if (!bounds) return null;\n      return <Comp bounds={bounds} ref={forwardedRef} {...rest} />;\n    }\n  }\n\n  return forwardRef((props, ref) => (\n    <CalcBoundsLayer {...props} forwardedRef={ref} />\n  ));\n}\n","import React, { Component } from 'react';\nimport { CRS } from 'leaflet';\nimport { Map, ImageOverlay, ZoomControl } from 'react-leaflet';\nimport Control from 'react-leaflet-control';\nimport Hotkeys from 'react-hot-keys';\nimport update from 'immutability-helper';\nimport 'leaflet-path-drag';\n\nimport 'leaflet/dist/leaflet.css';\n\nimport { Icon } from 'semantic-ui-react';\n\nimport { BBoxFigure, PolygonFigure } from './Figure';\n\nimport { convertPoint, lighten, colorMapping } from './utils';\nimport { withBounds, maxZoom } from './CalcBoundsHOC';\n\nclass Canvas extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      zoom: -1,\n      selectedFigureId: null,\n      cursorPos: { lat: 0, lng: 0 },\n    };\n    this.prevSelectedFigure = null;\n    this.skipNextClickEvent = false;\n\n    this.mapRef = React.createRef();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { onSelectionChange } = this.props;\n    const { selectedFigureId } = this.state;\n\n    if (this.prevSelectedFigureId !== selectedFigureId && onSelectionChange) {\n      this.prevSelectedFigureId = selectedFigureId;\n      onSelectionChange(selectedFigureId);\n    }\n  }\n\n  getSelectedFigure() {\n    const { selectedFigureId } = this.state;\n    const { figures } = this.props;\n    return figures.find(f => f.id === selectedFigureId);\n  }\n\n  handleChange(eventType, { point, pos, figure, points }) {\n    const { onChange, unfinishedFigure } = this.props;\n    const drawing = !!unfinishedFigure;\n\n    switch (eventType) {\n      case 'add':\n        if (drawing) {\n          let newState = unfinishedFigure.points;\n          newState = update(newState, { $push: [point] });\n\n          onChange(\n            'unfinished',\n            update(unfinishedFigure, {\n              points: {\n                $set: newState,\n              },\n            })\n          );\n        } else {\n          onChange(\n            'replace',\n            update(figure, { points: { $splice: [[pos, 0, point]] } })\n          );\n        }\n        break;\n\n      case 'end':\n        const f = unfinishedFigure;\n        onChange('new', f);\n        break;\n\n      case 'move':\n        onChange(\n          'replace',\n          update(figure, { points: { $splice: [[pos, 1, point]] } })\n        );\n        break;\n\n      case 'replace':\n        onChange('replace', update(figure, { points: { $set: points } }));\n        break;\n\n      case 'remove':\n        onChange(\n          'replace',\n          update(figure, { points: { $splice: [[pos, 1]] } })\n        );\n        break;\n\n      default:\n        throw new Error('unknown event type ' + eventType);\n    }\n  }\n\n  handleClick(e) {\n    const { unfinishedFigure } = this.props;\n    const drawing = !!unfinishedFigure;\n\n    if (this.skipNextClickEvent) {\n      // a hack, for whatever reason it is really hard to stop event propagation in leaflet\n      this.skipNextClickEvent = false;\n      return;\n    }\n\n    if (drawing) {\n      this.handleChange('add', { point: convertPoint(e.latlng) });\n      return;\n    }\n\n    if (!drawing) {\n      this.setState({ selectedFigureId: null });\n      return;\n    }\n  }\n\n  renderFigure(figure, options) {\n    const Comp = figure.type === 'bbox' ? BBoxFigure : PolygonFigure;\n\n    return (\n      <Comp\n        key={figure.id}\n        figure={figure}\n        options={options}\n        skipNextClick={() => (this.skipNextClickEvent = true)}\n      />\n    );\n  }\n\n  render() {\n    const {\n      url,\n      bounds,\n      height,\n      width,\n      figures,\n      unfinishedFigure,\n      onChange,\n      onReassignment,\n      style,\n    } = this.props;\n    const { zoom, selectedFigureId, cursorPos } = this.state;\n\n    const drawing = !!unfinishedFigure;\n\n    const calcDistance = (p1, p2) => {\n      const map = this.mapRef.current.leafletElement;\n      return map.latLngToLayerPoint(p1).distanceTo(map.latLngToLayerPoint(p2));\n    };\n\n    const unfinishedDrawingDOM = drawing\n      ? this.renderFigure(unfinishedFigure, {\n          finished: false,\n          editing: false,\n          interactive: false,\n          color: colorMapping[unfinishedFigure.color],\n          onChange: this.handleChange,\n          calcDistance,\n          newPoint: cursorPos,\n        })\n      : null;\n\n    const getColor = f =>\n      f.tracingOptions && f.tracingOptions.enabled\n        ? lighten(colorMapping[f.color], 80)\n        : colorMapping[f.color];\n    const figuresDOM = figures.map((f, i) =>\n      this.renderFigure(f, {\n        editing: selectedFigureId === f.id && !drawing,\n        finished: true,\n        interactive: !drawing,\n        sketch: f.tracingOptions && f.tracingOptions.enabled,\n        color: getColor(f),\n        vertexColor: colorMapping[f.color],\n        onSelect: () => this.setState({ selectedFigureId: f.id }),\n        onChange: this.handleChange,\n        calcDistance,\n      })\n    );\n\n    const hotkeysDOM = (\n      <Hotkeys\n        keyName=\"backspace,del,c,f,-,=,left,right,up,down\"\n        onKeyDown={key => {\n          const tagName = document.activeElement\n            ? document.activeElement.tagName.toLowerCase()\n            : null;\n          if (['input', 'textarea'].includes(tagName)) {\n            return false;\n          }\n          if (drawing) {\n            if (key === 'f') {\n              const { type, points } = unfinishedFigure;\n              if (type === 'polygon' && points.length >= 3) {\n                this.handleChange('end', {});\n              }\n            }\n          } else {\n            if (key === 'c') {\n              if (selectedFigureId && this.getSelectedFigure()) {\n                onReassignment(this.getSelectedFigure().type);\n              }\n            } else if (key === 'backspace' || key === 'del') {\n              if (selectedFigureId && this.getSelectedFigure()) {\n                onChange('delete', this.getSelectedFigure());\n              }\n            }\n          }\n\n          const map = this.mapRef.current.leafletElement;\n          if (key === 'left') {\n            map.panBy([80, 0]);\n          }\n          if (key === 'right') {\n            map.panBy([-80, 0]);\n          }\n          if (key === 'up') {\n            map.panBy([0, 80]);\n          }\n          if (key === 'down') {\n            map.panBy([0, -80]);\n          }\n          if (key === '=') {\n            map.setZoom(map.getZoom() + 1);\n          }\n          if (key === '-') {\n            map.setZoom(map.getZoom() - 1);\n          }\n        }}\n      />\n    );\n\n    let renderedTrace = null;\n    const selectedFigure = this.getSelectedFigure();\n    if (selectedFigure && selectedFigure.type === 'polygon') {\n      const trace = selectedFigure.tracingOptions\n        ? selectedFigure.tracingOptions.trace || []\n        : [];\n      const figure = {\n        id: 'trace',\n        type: 'line',\n        points: trace,\n      };\n      const traceOptions = {\n        editing: false,\n        finished: true,\n        color: colorMapping[selectedFigure.color],\n      };\n      renderedTrace = <PolygonFigure figure={figure} options={traceOptions} />;\n    }\n\n    return (\n      <div\n        style={{\n          cursor: drawing ? 'crosshair' : 'grab',\n          height: '100%',\n          ...style,\n        }}\n      >\n        <Map\n          crs={CRS.Simple}\n          zoom={zoom}\n          minZoom={-50}\n          maxZoom={maxZoom}\n          center={[height / 2, width / 2]}\n          zoomAnimation={false}\n          zoomSnap={0.1}\n          zoomControl={false}\n          keyboard={false}\n          attributionControl={false}\n          onClick={this.handleClick}\n          onZoom={e => this.setState({ zoom: e.target.getZoom() })}\n          onMousemove={e => this.setState({ cursorPos: e.latlng })}\n          ref={this.mapRef}\n        >\n          <ZoomControl position=\"bottomright\" />\n          <Control className=\"leaflet-bar\" position=\"bottomright\">\n            <a\n              role=\"button\"\n              title=\"Zoom reset\"\n              href=\"#\"\n              onClick={() => {\n                const map = this.mapRef.current.leafletElement;\n                map.setView(map.options.center, map.options.zoom);\n              }}\n            >\n              <Icon name=\"redo\" fitted style={{ fontSize: '1.2em' }} />\n            </a>\n          </Control>\n          <ImageOverlay url={url} bounds={bounds} />\n          {unfinishedDrawingDOM}\n          {renderedTrace}\n          {figuresDOM}\n          {hotkeysDOM}\n        </Map>\n      </div>\n    );\n  }\n}\n\nexport default withBounds(Canvas);\n","import React from 'react';\nimport { Header, Icon, Segment, Table } from 'semantic-ui-react';\n\nconst style = {\n  height: '100vh',\n  overflowY: 'auto',\n  overflowX: 'hidden',\n  borderRight: '1px solid #ccc',\n};\nconst headerIconStyle = { fontSize: '0.8em', float: 'right' };\n\nexport default function HotkeysPanel({ labels, onClose }) {\n  const labelHotkeys = labels.map((label, i) => (\n    <Table.Row key={label}>\n      <Table.Cell>{label}</Table.Cell>\n      <Table.Cell>{i}</Table.Cell>\n    </Table.Row>\n  ));\n\n  return (\n    <div style={style}>\n      <Header as=\"h2\" attached=\"top\">\n        Hotkeys\n        <Icon link name=\"close\" style={headerIconStyle} onClick={onClose} />\n      </Header>\n      <Segment attached>\n        <Header as=\"h3\"> Labels </Header>\n        <Table celled>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>Action</Table.HeaderCell>\n              <Table.HeaderCell>Key</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Body>{labelHotkeys}</Table.Body>\n        </Table>\n        <Header as=\"h3\"> General </Header>\n        <Table celled>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>Action</Table.HeaderCell>\n              <Table.HeaderCell>Key</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Body>\n            <Table.Row>\n              <Table.Cell>Complete shape</Table.Cell>\n              <Table.Cell>f</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>Change label</Table.Cell>\n              <Table.Cell>c</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>Delete figure</Table.Cell>\n              <Table.Cell>Delete</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>Cancel selection</Table.Cell>\n              <Table.Cell>Escape</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>Undo the edit</Table.Cell>\n              <Table.Cell>Ctrl+Z</Table.Cell>\n            </Table.Row>\n          </Table.Body>\n        </Table>\n        <Header as=\"h3\"> Navigation </Header>\n        <Table celled>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>Action</Table.HeaderCell>\n              <Table.HeaderCell>Key</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Body>\n            <Table.Row>\n              <Table.Cell>Zoom In</Table.Cell>\n              <Table.Cell>+/=</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>Zoom Out</Table.Cell>\n              <Table.Cell>-</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>Move the Image</Table.Cell>\n              <Table.Cell>←→↑↓</Table.Cell>\n            </Table.Row>\n          </Table.Body>\n        </Table>\n      </Segment>\n    </div>\n  );\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Header,\n  List,\n  Label,\n  Icon,\n  Button,\n  Form,\n  Checkbox,\n  Radio,\n  Select,\n} from 'semantic-ui-react';\nimport { shortcuts, colors } from './utils';\nimport Hotkeys from 'react-hot-keys';\n\nconst headerIconStyle = { fontSize: '0.8em', float: 'right' };\nexport default class Sidebar extends PureComponent {\n  render() {\n    const {\n      title,\n      onSelect,\n      labels,\n      selected,\n      toggles,\n      onToggle,\n      filter,\n      style,\n      openHotkeys,\n      onBack,\n      onSkip,\n      onSubmit,\n      labelData,\n      onFormChange,\n      models,\n      makePrediction,\n    } = this.props;\n\n    const hotkeysButton = openHotkeys ? (\n      <Icon\n        link\n        name=\"keyboard\"\n        style={headerIconStyle}\n        onClick={openHotkeys}\n      />\n    ) : null;\n\n    const getSelectHandler = ({ type, id }) =>\n      type === 'bbox' || type === 'polygon' ? () => onSelect(id) : null;\n    return (\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          padding: '1em 0.5em',\n          borderRight: '1px solid #ccc',\n          height: '100%',\n          ...style,\n        }}\n      >\n        <Header size=\"large\" style={{ flex: '0 0 auto' }}>\n          {title}\n          {hotkeysButton}\n        </Header>\n        <List divided selection style={{ flex: 1, overflowY: 'auto' }}>\n          {labels.map((label, i) =>\n            ListItem({\n              shortcut: shortcuts[i],\n              label,\n              color: colors[i],\n              onSelect: getSelectHandler(label),\n              selected: selected === label.id,\n              disabled: filter ? !filter(label) : false,\n              onToggle: onToggle,\n              isToggled: toggles && toggles[label.id],\n              labelData: labelData[label.id],\n              onFormChange,\n              models,\n              makePrediction,\n            })\n          )}\n          <Hotkeys keyName=\"esc\" onKeyDown={() => onSelect(null)} />\n        </List>\n        <div style={{ flex: '0 0 auto', display: 'flex' }}>\n          <Button onClick={onBack}>Back</Button>\n          <span style={{ flex: 1 }} />\n          <Button secondary onClick={onSkip}>\n            Skip\n          </Button>\n          <Button primary onClick={onSubmit}>\n            Submit\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst iconMapping = {\n  bbox: 'object ungroup outline',\n  polygon: 'pencil alternate',\n};\n\nconst typeHidable = {\n  bbox: true,\n  polygon: true,\n  text: false,\n  select: false,\n  'select-one': false,\n};\nfunction ListItem({\n  shortcut,\n  label,\n  onSelect,\n  onToggle,\n  color,\n  selected = false,\n  disabled = false,\n  isToggled = false,\n  labelData,\n  onFormChange,\n  models,\n  makePrediction,\n}) {\n  const icons = [];\n\n  if (onToggle && typeHidable[label.type]) {\n    icons.push(\n      <Button\n        key=\"visibility-icon\"\n        icon={isToggled ? 'eye' : 'eye slash'}\n        style={{ padding: 5 }}\n        onClick={e => {\n          onToggle(label);\n          e.stopPropagation();\n        }}\n      />\n    );\n  }\n\n  const iconType = iconMapping[label.type];\n  const figureIcon = iconType ? (\n    <Icon\n      key=\"type-icon\"\n      name={iconType}\n      style={{ opacity: 0.5, display: 'inline-block', marginLeft: 5 }}\n    />\n  ) : null;\n\n  function genSublist(label) {\n    const sublistStyle = { fontSize: '12px' };\n    if (label.type === 'text') {\n      const filteredModels = (models || []).filter(\n        ({ type }) => type === 'object_classification'\n      );\n      const options = filteredModels.map(({ id, name }) => ({\n        value: id,\n        text: name,\n      }));\n      const fillInDOM =\n        filteredModels.length > 0 ? (\n          <div>\n            Fill in using a model prediction:\n            <Select\n              options={options}\n              placeholder=\"Select a model\"\n              onChange={async (e, { value }) => {\n                const m = models.find(({ id }) => id === value);\n                const text = (await makePrediction(m)).join(', ');\n                onFormChange(label.id, [text]);\n              }}\n            />\n          </div>\n        ) : null;\n      return (\n        <List style={sublistStyle}>\n          <List.Item>\n            <Form>\n              <Form.Input\n                label={label.prompt}\n                style={{ width: '100%' }}\n                value={labelData[0] || ''}\n                onChange={(e, { value }) => onFormChange(label.id, [value])}\n              />\n              {fillInDOM}\n            </Form>\n          </List.Item>\n        </List>\n      );\n    }\n\n    if (label.type === 'select') {\n      const { options } = label;\n      const handleChange = function(option) {\n        return (e, { checked }) =>\n          onFormChange(\n            label.id,\n            checked\n              ? labelData.concat([option])\n              : labelData.filter(x => x !== option)\n          );\n      };\n\n      const items = options.map(option => (\n        <List.Item key={option}>\n          <Checkbox\n            label={option}\n            checked={labelData.indexOf(option) !== -1}\n            onChange={handleChange(option)}\n          />\n        </List.Item>\n      ));\n      return <List style={sublistStyle}>{items}</List>;\n    }\n\n    if (label.type === 'select-one') {\n      const { options } = label;\n      const items = options.map(option => (\n        <List.Item key={option}>\n          <Radio\n            label={option}\n            checked={labelData.indexOf(option) !== -1}\n            onChange={(e, { checked }) => onFormChange(label.id, [option])}\n          />\n        </List.Item>\n      ));\n      return <List style={sublistStyle}>{items}</List>;\n    }\n\n    return null;\n  }\n\n  return (\n    <List.Item\n      onClick={onSelect}\n      disabled={disabled}\n      active={selected}\n      key={label.id}\n      style={{ fontSize: '1.3em' }}\n    >\n      <Hotkeys\n        keyName={shortcut}\n        onKeyDown={() => !disabled && onSelect && onSelect()}\n      >\n        <Label color={color} horizontal>\n          {shortcut}\n        </Label>\n        {label.name}\n        {figureIcon}\n        <span style={{ float: 'right' }}>{icons}</span>\n        {genSublist(label)}\n      </Hotkeys>\n    </List.Item>\n  );\n}\n","import React, { PureComponent, Component } from 'react';\nimport { Radio, Select, Button, Loader } from 'semantic-ui-react';\n\nconst defaultStyle = {\n  width: '100%',\n  background: '#fcfcfc',\n  minHeight: 40,\n  borderBottom: '1px solid #ccc',\n  padding: '10px 15px',\n};\n\nconst smoothingOptions = [\n  { value: 0.3, text: 'Slight' },\n  { value: 0.6, text: 'Normal' },\n  { value: 1.2, text: 'Strong' },\n  { value: 1.6, text: 'Extreme' },\n];\n\nconst precisionOptions = [\n  { value: 0, text: '1x1' },\n  { value: 1, text: '3x3' },\n  { value: 2, text: '5x5' },\n];\n\nconst selectStyle = {\n  marginLeft: 10,\n};\n\nconst groupStyle = {\n  marginLeft: 20,\n};\n\nexport class PathToolbar extends PureComponent {\n  render() {\n    const { style, enabled, smoothing, precision, onChange } = this.props;\n    const disabled = !enabled;\n    const selectProps = {\n      compact: true,\n      disabled,\n      style: selectStyle,\n      onChange: (e, { name, value }) => onChange(name, value),\n    };\n\n    return (\n      <div style={{ ...style, ...defaultStyle }}>\n        <Radio\n          label=\"Auto-tracing\"\n          toggle\n          checked={enabled}\n          onChange={(e, { checked }) => onChange('enabled', checked)}\n        />\n        <span style={{ marginLeft: 100 }}>\n          <span style={groupStyle}>\n            Smoothing:\n            <Select\n              {...selectProps}\n              name=\"smoothing\"\n              value={smoothing}\n              options={smoothingOptions}\n            />\n          </span>\n          <span style={groupStyle}>\n            Anchor precision:\n            <Select\n              {...selectProps}\n              name=\"precision\"\n              value={precision}\n              options={precisionOptions}\n            />\n          </span>\n        </span>\n      </div>\n    );\n  }\n}\n\nconst predictionSmoothingOptions = [\n  { value: 1.0, text: 'Slight' },\n  { value: 2.5, text: 'Normal' },\n  { value: 5.0, text: 'Strong' },\n  { value: 10.0, text: 'Extreme' },\n];\n\nlet lastSelected = {};\nexport class MakePredictionToolbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      model: lastSelected.model || props.models[0].id,\n      smoothing: lastSelected.smoothing || predictionSmoothingOptions[1].value,\n      loading: false,\n    };\n  }\n\n  async handleGenerate(model, smoothing) {\n    this.setState({ loading: true });\n    await this.props.generate(model, { smoothing });\n    this.setState({ loading: false });\n  }\n\n  render() {\n    const { style, models } = this.props;\n    const { model, smoothing, loading } = this.state;\n\n    const selectProps = {\n      style: selectStyle,\n      onChange: (e, { name, value }) => {\n        this.setState({ [name]: value });\n        lastSelected[name] = value;\n      },\n    };\n\n    const options = models.map(({ id, name }) => ({ value: id, text: name }));\n    const m = models.find(m => m.id === model);\n\n    const smoothingSelect =\n      m.type === 'semantic_segmentation' ? (\n        <span style={groupStyle}>\n          Smoothing:\n          <Select\n            {...selectProps}\n            name=\"smoothing\"\n            value={smoothing}\n            options={predictionSmoothingOptions}\n          />\n        </span>\n      ) : null;\n\n    const disabled = m.type === 'object_classification';\n    const text = disabled\n      ? 'This model can only be used to generate general tags for text fields.'\n      : null;\n\n    return (\n      <div style={{ ...style, ...defaultStyle }}>\n        <span style={groupStyle}>\n          Generate selections using a model\n          <Select\n            {...selectProps}\n            name=\"model\"\n            value={model}\n            options={options}\n          />\n        </span>\n        {smoothingSelect}\n        <span style={groupStyle}>\n          <Button\n            disabled={disabled}\n            onClick={() => this.handleGenerate(m, smoothing)}\n          >\n            Generate\n          </Button>\n          <Loader active={loading} inline />\n          <span>{text}</span>\n        </span>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nconst containerStyle = {\n  flex: '0 0 auto',\n  maxHeight: 300,\n  padding: '0 10px',\n  textAlign: 'center',\n  borderBottom: '1px solid #ccc',\n};\n\nconst imageStyle = {\n  margin: '0 auto',\n  maxHeight: 250,\n};\n\nexport default function renderReference({ referenceLink, referenceText }) {\n  if (!referenceText && !referenceLink) return null;\n  const img = referenceLink ? (\n    <img alt=\"Reference\" src={referenceLink} style={imageStyle} />\n  ) : null;\n  return (\n    <div style={containerStyle}>\n      {img}\n      <p>{referenceText}</p>\n    </div>\n  );\n}\n","// Heap implementation is adapted from:\n// https://github.com/meteor/meteor/blob/devel/packages/binary-heap/max-heap.js\n// Meteor is MIT licensed\n\n// Constructor of Heap\n// - comparator - Function - given two items returns a number\n// - options:\n//   - initData - Array - Optional - the initial data in a format:\n//        Object:\n//          - id - String - unique id of the item\n//          - value - Any - the data value\n//      each value is retained\n//   - IdMap - Constructor - Optional - custom IdMap class to store id->index\n//       mappings internally. Standard IdMap is used by default.\nexport class MaxHeap {\n  constructor(comparator, options = {}) {\n    if (typeof comparator !== 'function') {\n      throw new Error(\n        'Passed comparator is invalid, should be a comparison function'\n      );\n    }\n\n    // a C-style comparator that is given two values and returns a number,\n    // negative if the first value is less than the second, positive if the second\n    // value is greater than the first and zero if they are equal.\n    this._comparator = comparator;\n\n    // _heapIdx maps an id to an index in the Heap array the corresponding value\n    // is located on.\n    this._heapIdx = new Map();\n\n    // The Heap data-structure implemented as a 0-based contiguous array where\n    // every item on index idx is a node in a complete binary tree. Every node can\n    // have children on indexes idx*2+1 and idx*2+2, except for the leaves. Every\n    // node has a parent on index (idx-1)/2;\n    this._heap = [];\n\n    // If the initial array is passed, we can build the heap in linear time\n    // complexity (O(N)) compared to linearithmic time complexity (O(nlogn)) if\n    // we push elements one by one.\n    if (Array.isArray(options.initData)) {\n      this._initFromData(options.initData);\n    }\n  }\n\n  // Builds a new heap in-place in linear time based on passed data\n  _initFromData(data) {\n    this._heap = data.map(({ id, value }) => ({ id, value }));\n\n    data.forEach(({ id }, i) => this._heapIdx.set(id, i));\n\n    if (!data.length) {\n      return;\n    }\n\n    // start from the first non-leaf - the parent of the last leaf\n    for (let i = parentIdx(data.length - 1); i >= 0; i--) {\n      this._downHeap(i);\n    }\n  }\n\n  _downHeap(idx) {\n    while (leftChildIdx(idx) < this.size()) {\n      const left = leftChildIdx(idx);\n      const right = rightChildIdx(idx);\n      let largest = idx;\n\n      if (left < this.size()) {\n        largest = this._maxIndex(largest, left);\n      }\n\n      if (right < this.size()) {\n        largest = this._maxIndex(largest, right);\n      }\n\n      if (largest === idx) {\n        break;\n      }\n\n      this._swap(largest, idx);\n      idx = largest;\n    }\n  }\n\n  _upHeap(idx) {\n    while (idx > 0) {\n      const parent = parentIdx(idx);\n      if (this._maxIndex(parent, idx) === idx) {\n        this._swap(parent, idx);\n        idx = parent;\n      } else {\n        break;\n      }\n    }\n  }\n\n  _maxIndex(idxA, idxB) {\n    const valueA = this._get(idxA);\n    const valueB = this._get(idxB);\n    return this._comparator(valueA, valueB) >= 0 ? idxA : idxB;\n  }\n\n  // Internal: gets raw data object placed on idxth place in heap\n  _get(idx) {\n    return this._heap[idx].value;\n  }\n\n  _swap(idxA, idxB) {\n    const recA = this._heap[idxA];\n    const recB = this._heap[idxB];\n\n    this._heapIdx.set(recA.id, idxB);\n    this._heapIdx.set(recB.id, idxA);\n\n    this._heap[idxA] = recB;\n    this._heap[idxB] = recA;\n  }\n\n  get(id) {\n    return this.has(id) ? this._get(this._heapIdx.get(id)) : null;\n  }\n\n  set(id, value) {\n    if (this.has(id)) {\n      if (this.get(id) === value) {\n        return;\n      }\n\n      const idx = this._heapIdx.get(id);\n      this._heap[idx].value = value;\n\n      // Fix the new value's position\n      // Either bubble new value up if it is greater than its parent\n      this._upHeap(idx);\n      // or bubble it down if it is smaller than one of its children\n      this._downHeap(idx);\n    } else {\n      this._heapIdx.set(id, this._heap.length);\n      this._heap.push({ id, value });\n      this._upHeap(this._heap.length - 1);\n    }\n  }\n\n  remove(id) {\n    if (this.has(id)) {\n      const last = this._heap.length - 1;\n      const idx = this._heapIdx.get(id);\n\n      if (idx !== last) {\n        this._swap(idx, last);\n        this._heap.pop();\n        this._heapIdx.delete(id);\n\n        // Fix the swapped value's position\n        this._upHeap(idx);\n        this._downHeap(idx);\n      } else {\n        this._heap.pop();\n        this._heapIdx.delete(id);\n      }\n    }\n  }\n\n  has(id) {\n    return this._heapIdx.has(id);\n  }\n\n  empty() {\n    return !this.size();\n  }\n\n  clear() {\n    this._heap = [];\n    this._heapIdx = new Map();\n  }\n\n  // iterate over values in no particular order\n  forEach(iterator) {\n    this._heap.forEach(obj => iterator(obj.value, obj.id));\n  }\n\n  size() {\n    return this._heap.length;\n  }\n\n  setDefault(id, def) {\n    if (this.has(id)) {\n      return this.get(id);\n    }\n\n    this.set(id, def);\n    return def;\n  }\n\n  maxElementId() {\n    return this.size() ? this._heap[0].id : null;\n  }\n\n  _selfCheck() {\n    for (let i = 1; i < this._heap.length; i++) {\n      if (this._maxIndex(parentIdx(i), i) !== parentIdx(i)) {\n        throw new Error(\n          `An item with id ${this._heap[i].id}` +\n            ' has a parent younger than it: ' +\n            this._heap[parentIdx(i)].id\n        );\n      }\n    }\n  }\n}\n\nexport class MinHeap extends MaxHeap {\n  constructor(comparator, options) {\n    super((a, b) => -comparator(a, b), options);\n  }\n\n  maxElementId() {\n    throw new Error('Cannot call maxElementId on MinHeap');\n  }\n\n  minElementId() {\n    return super.maxElementId();\n  }\n}\n\nconst leftChildIdx = i => i * 2 + 1;\nconst rightChildIdx = i => i * 2 + 2;\nconst parentIdx = i => (i - 1) >> 1;\n","import { dijkstra } from './Dijkstra';\nconst defaultMarkRadius = 1; // ~9 pixels per mark\nexport function computePath({ points, height, width, imageData, markRadius }) {\n  markRadius = markRadius === undefined ? defaultMarkRadius : markRadius;\n  function pointToId(x, y) {\n    return (height - y) * (width * 4) + x * 4;\n  }\n\n  function idToPoint(id) {\n    const x = (id % (width * 4)) / 4;\n    const y = height - Math.floor(id / (width * 4));\n    return { x, y };\n  }\n\n  const pointsSets = points.map(({ x, y }) => {\n    x = Math.floor(x);\n    y = Math.floor(y);\n    const points = [];\n    for (let dx = -markRadius; dx <= markRadius; dx++) {\n      for (let dy = -markRadius; dy <= markRadius; dy++) {\n        const p = { x: x + dx, y: y + dy };\n        if (inBounds(p, height, width)) {\n          points.push(p);\n        }\n      }\n    }\n    return points;\n  });\n\n  const idsSets = pointsSets.map(\n    ps => new Set(ps.map(({ x, y }) => pointToId(x, y)))\n  );\n\n  let minPoint, maxPoint;\n\n  function getPaths(startingSet, startingDistances, endSet) {\n    minPoint = { x: Infinity, y: Infinity };\n    maxPoint = { x: -Infinity, y: -Infinity };\n\n    for (const id of endSet) {\n      const p = idToPoint(id);\n      minPoint.x = Math.min(minPoint.x, p.x);\n      minPoint.y = Math.min(minPoint.y, p.y);\n      maxPoint.x = Math.max(maxPoint.x, p.x);\n      maxPoint.y = Math.max(maxPoint.y, p.y);\n    }\n    for (const id of startingSet) {\n      const p = idToPoint(id);\n      minPoint.x = Math.min(minPoint.x, p.x);\n      minPoint.y = Math.min(minPoint.y, p.y);\n      maxPoint.x = Math.max(maxPoint.x, p.x);\n      maxPoint.y = Math.max(maxPoint.y, p.y);\n    }\n    minPoint.x -= 3;\n    minPoint.y -= 3;\n    maxPoint.x += 3;\n    maxPoint.y += 3;\n\n    function calcCost(a, b, c, d) {\n      let sum = 0;\n      for (let i = 0; i < 3; i++) {\n        const aveA = (imageData[a + i] + imageData[b + i]) / 2;\n        const aveB = (imageData[c + i] + imageData[d + i]) / 2;\n        const diff = Math.abs(aveA - aveB);\n        sum += diff * diff;\n      }\n      return sum;\n    }\n\n    const maxCost = 1000000;\n    const distanceFn = (a, b) => {\n      const pa = idToPoint(a);\n      const pb = idToPoint(b);\n\n      if (pa.x === pb.x) {\n        const pl1 = pointToId(pa.x - 1, pa.y);\n        const pl2 = pointToId(pa.x - 1, pb.y);\n        const pr1 = pointToId(pa.x + 1, pa.y);\n        const pr2 = pointToId(pa.x + 1, pb.y);\n        const cost = calcCost(pl1, pl2, pr1, pr2);\n        return maxCost - cost;\n      } else if (pa.y === pb.y) {\n        const pl1 = pointToId(pa.x, pa.y - 1);\n        const pl2 = pointToId(pb.x, pb.y - 1);\n        const pr1 = pointToId(pa.x, pa.y + 1);\n        const pr2 = pointToId(pb.x, pb.y + 1);\n        const cost = calcCost(pl1, pl2, pr1, pr2);\n        return maxCost - cost;\n      } else {\n        const p1 = pointToId(pa.x, pb.y);\n        const p2 = pointToId(pb.x, pa.y);\n        const cost = calcCost(p1, p1, p2, p2);\n        return maxCost - Math.floor(cost / 1.414);\n      }\n    };\n\n    const neighborsFn = id => {\n      const p = idToPoint(id);\n      const points = [];\n      for (let i = -1; i <= 1; i++) {\n        for (let j = -1; j <= 1; j++) {\n          if (!i && !j) continue;\n          points.push({\n            x: p.x + i,\n            y: p.y + j,\n          });\n        }\n      }\n      const validPoints = points\n        .filter(p => inBounds(p, height, width))\n        .filter(\n          p =>\n            p.x >= minPoint.x &&\n            p.x <= maxPoint.x &&\n            p.y >= minPoint.y &&\n            p.y <= maxPoint.y\n        );\n      return validPoints.map(p => pointToId(p.x, p.y));\n    };\n\n    return dijkstra(startingDistances, endSet, distanceFn, neighborsFn);\n  }\n\n  let prevDistances = new Map();\n  for (const id of idsSets[0]) prevDistances.set(id, 0);\n  const pathsSets = [];\n\n  idsSets.forEach((currentSet, i) => {\n    if (!i) return;\n    const prevSet = idsSets[i - 1];\n    const paths = getPaths(prevSet, prevDistances, currentSet);\n    pathsSets.push(paths);\n    prevDistances = new Map();\n    paths.forEach(({ id, distance }) => prevDistances.set(id, distance));\n  });\n\n  let minDist = Infinity,\n    pathId;\n  pathsSets[pathsSets.length - 1].forEach(({ id, distance }) => {\n    if (minDist > distance) {\n      minDist = distance;\n      pathId = id;\n    }\n  });\n  let totalPath = [];\n  pathsSets.reverse();\n  pathsSets.forEach(pathsSet => {\n    let selectedPath = null;\n    pathsSet.forEach(p => {\n      if (p.id === pathId) {\n        selectedPath = p;\n      }\n    });\n\n    if (!selectedPath) {\n      return;\n    }\n\n    totalPath = selectedPath.path.concat(totalPath);\n    pathId = selectedPath.path[0];\n  });\n\n  return totalPath.map(id => idToPoint(id));\n}\n\nfunction inBounds(p, height, width) {\n  return p.x >= 0 && p.x < width && p.y >= 0 && p.y < height;\n}\n","import { MinHeap } from './MaxHeap';\n\nexport function dijkstra(startingDistances, endSet, distanceFn, neighborsFn) {\n  const queue = new MinHeap((a, b) => a - b);\n  const fromId = new Map();\n\n  const finalDistances = new Map();\n  for (const [id, dist] of startingDistances) {\n    queue.set(id, dist);\n    finalDistances.set(id, dist);\n  }\n\n  const leftSet = new Set(endSet.entries());\n  while (!queue.empty() && leftSet.size > 0) {\n    const id = queue.minElementId();\n    const dist = queue.get(id);\n    queue.remove(id);\n\n    if (leftSet.has(id)) {\n      leftSet.delete(id);\n    }\n\n    neighborsFn(id).forEach(nid => {\n      const ndist = finalDistances.has(nid)\n        ? finalDistances.get(nid)\n        : Infinity;\n      const delta = distanceFn(id, nid);\n      if (dist + delta <= ndist) {\n        queue.set(nid, dist + delta);\n        finalDistances.set(nid, dist + delta);\n\n        if (endSet.has(nid)) {\n          leftSet.add(nid);\n        }\n\n        fromId.set(nid, id);\n      }\n    });\n  }\n\n  return Array.from(endSet).map(id => {\n    const path = [];\n    let curId = id;\n    while (curId !== null) {\n      path.push(curId);\n      curId = fromId.has(curId) ? fromId.get(curId) : null;\n    }\n\n    return {\n      id,\n      path: path.reverse(),\n      distance: finalDistances.get(id),\n    };\n  });\n}\n","const d = [[1, 0], [0, -1], [-1, 0], [0, 1]];\nconst DIR = {\n  DOWN: 0,\n  LEFT: 1,\n  UP: 2,\n  RIGHT: 3,\n};\n// 2^4 mappings from mask to new direction after a possible turn\n// assuming the wall is on the right in the current direction\nconst turnDirection = [\n  -1,\n  DIR.DOWN,\n  DIR.RIGHT,\n  DIR.RIGHT,\n  DIR.UP,\n  -1,\n  DIR.UP,\n  DIR.UP,\n  DIR.LEFT,\n  DIR.DOWN,\n  -1,\n  DIR.RIGHT,\n  DIR.LEFT,\n  DIR.DOWN,\n  DIR.LEFT,\n  -1,\n];\n\nfunction vectorize(start, used, matrix) {\n  const n = used.length;\n  const m = used[0].length;\n\n  // mark everything with a bfs\n  const q = [];\n  q.push(start);\n\n  let area = 0;\n  for (let front = 0; front < q.length; front++) {\n    const cur = q[front];\n    area++;\n    for (let di = 0; di < d.length; di++) {\n      const next = [cur[0] + d[di][0], cur[1] + d[di][1]];\n\n      if (\n        next[0] >= 0 &&\n        next[0] < n &&\n        next[1] >= 0 &&\n        next[1] < m &&\n        !used[next[0]][next[1]] &&\n        matrix[next[0]][next[1]] === matrix[start[0]][start[1]]\n      ) {\n        used[next[0]][next[1]] = true;\n        q.push(next);\n      }\n    }\n  }\n\n  // skip anything too small\n  if (area < n * m * 0.002) {\n    return null;\n  }\n\n  // assume that start is indeed the left-most element of the top-most row\n  // belonging to the figure we are trying to vectorize\n  const points = [start];\n  let direction = DIR.RIGHT; // start moving right\n  let cur = start;\n\n  function getMask(pos) {\n    const [y, x] = pos;\n    const [sy, sx] = start;\n    let mask = 0;\n    if (x > 0 && y > 0 && matrix[y - 1][x - 1] === matrix[sy][sx]) mask |= 1;\n    mask <<= 1;\n\n    if (y > 0 && x < m && matrix[y - 1][x] === matrix[sy][sx]) mask |= 1;\n    mask <<= 1;\n\n    if (y < n && x < m && matrix[y][x] === matrix[sy][sx]) mask |= 1;\n    mask <<= 1;\n\n    if (y < n && x > 0 && matrix[y][x - 1] === matrix[sy][sx]) mask |= 1;\n\n    return mask;\n  }\n\n  while (true) {\n    const next = [cur[0] + d[direction][0], cur[1] + d[direction][1]];\n\n    points.push(next);\n    if (next[0] === start[0] && next[1] === start[1]) break;\n\n    const mask = getMask(next);\n    let nDirection = turnDirection[mask];\n\n    if (nDirection === -1) {\n      nDirection = (direction + 1) % 4;\n    }\n\n    direction = nDirection;\n    cur = next;\n  }\n\n  return points;\n}\n\nexport function computeVectorized(matrix) {\n  const n = matrix.length;\n  const m = matrix[0].length;\n\n  const used = matrix.map(row => row.map(() => false));\n  const vectors = [];\n\n  for (let i = 0; i < n; i++)\n    for (let j = 0; j < m; j++)\n      if (!used[i][j] && matrix[i][j] !== 0)\n        vectors.push(vectorize([i, j], used, matrix));\n\n  return vectors.filter(v => !!v);\n}\n","import { computePath } from '../image-processing/LiveWire';\nimport { computeVectorized } from '../image-processing/Segmentation';\nimport { LineUtil } from 'leaflet';\n\nexport function computeTrace(\n  points,\n  { height, width, imageData },\n  { smoothing, precision }\n) {\n  points = points.slice();\n  points.push(points[0]);\n  const path = computePath({\n    points: points.map(({ lng, lat }) => ({\n      x: lng,\n      y: lat,\n    })),\n    height,\n    width,\n    imageData,\n    markRadius: precision,\n  });\n  const simplePath = LineUtil.simplify(path, smoothing || 0.6);\n  return simplePath.map(({ x, y }) => ({ lng: x, lat: y }));\n}\n\nexport function vectorizeSegmentation(imageData, { scaling, smoothing }) {\n  scaling = scaling || 1.0;\n  smoothing = smoothing || 2.0;\n  // reduce from nxmx1 to nxm\n  imageData = imageData.map(row => row.map(channels => channels[0]));\n  const paths = computeVectorized(imageData);\n  return paths.map(path => {\n    const simplePath = LineUtil.simplify(\n      path.map(([y, x]) => ({ x, y: imageData.length - y })),\n      smoothing\n    );\n    return simplePath.map(({ x, y }) => ({\n      lng: x / scaling,\n      lat: y / scaling,\n    }));\n  });\n}\n","import React, { Component } from 'react';\nimport { genId } from './utils';\nimport { vectorizeSegmentation } from './tracing';\n\nexport function withPredictions(Comp) {\n  return class PredictionsLayer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        models: [],\n      };\n\n      this.makePrediction = this.makePrediction.bind(this);\n    }\n\n    async makePrediction(model, options = {}) {\n      const { imgB64, b64Scaling, height, width, fetch } = this.props;\n      const { id } = model;\n\n      const req = fetch('/api/mlmodels/' + id, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          instances: [\n            {\n              input_bytes: {\n                b64: imgB64,\n              },\n            },\n          ],\n        }),\n      });\n\n      const resp = await (await req).json();\n\n      if (model.type === 'object_detection') {\n        const preds = [];\n        resp.predictions.forEach(({ det_boxes: [y1, x1, y2, x2] }) => {\n          preds.push({\n            type: 'bbox',\n            color: 'gray',\n            points: [\n              { lng: x1 * width, lat: (1 - y1) * height },\n              { lng: x2 * width, lat: (1 - y2) * height },\n            ],\n            id: genId(),\n            modelId: model.id,\n          });\n        });\n        return preds;\n      } else if (model.type === 'semantic_segmentation') {\n        const imageData = resp.predictions[0].raw_image;\n        const { smoothing } = options;\n        const vectors = vectorizeSegmentation(imageData, {\n          scaling: b64Scaling,\n          smoothing,\n        });\n        return vectors.map(path => ({\n          type: 'polygon',\n          color: 'gray',\n          points: path,\n          id: genId(),\n          modelId: model.id,\n        }));\n      }\n\n      return resp.predictions;\n    }\n\n    async componentDidMount() {\n      const { fetch } = this.props;\n      const models = await (await fetch('/api/mlmodels')).json();\n      this.setState({ models });\n    }\n\n    render() {\n      const { props, state } = this;\n      const { imgB64, ...passedProps } = props;\n      const { models } = state;\n      const newProps = {\n        models,\n        makePrediction: this.makePrediction,\n      };\n\n      return <Comp {...newProps} {...passedProps} />;\n    }\n  };\n}\n","import React, { Component } from 'react';\nimport Hotkeys from 'react-hot-keys';\nimport update from 'immutability-helper';\n\nimport 'semantic-ui-css/semantic.min.css';\n\nimport Canvas from './Canvas';\nimport HotkeysPanel from './HotkeysPanel';\nimport Sidebar from './Sidebar';\nimport { PathToolbar, MakePredictionToolbar } from './CanvasToolbar';\nimport Reference from './Reference';\nimport './LabelingApp.css';\n\nimport { genId, colors } from './utils';\nimport { computeTrace } from './tracing';\nimport { withHistory } from './LabelingAppHistoryHOC';\nimport { withLoadImageData } from './LoadImageDataHOC';\nimport { withPredictions } from './MakePredictionsHOC';\n\n/*\n type Figure = {\n   type: 'bbox' | 'polygon';\n   points: [{ lat: Number, lng: Number }];\n   ?color: Color;\n };\n*/\n\nclass LabelingApp extends Component {\n  constructor(props) {\n    super(props);\n\n    const { labels } = props;\n    const toggles = {};\n    labels.map(label => (toggles[label.id] = true));\n\n    this.state = {\n      selected: null,\n      toggles,\n\n      selectedFigureId: null,\n\n      // UI\n      reassigning: { status: false, type: null },\n      hotkeysPanel: false,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSelected = this.handleSelected.bind(this);\n    this.handleSelectionChange = this.handleSelectionChange.bind(this);\n    this.canvasRef = React.createRef();\n  }\n\n  handleSelected(selected) {\n    if (selected === this.state.selected) return;\n    const { pushState } = this.props;\n\n    if (!selected) {\n      pushState(\n        state => ({\n          unfinishedFigure: null,\n        }),\n        () => this.setState({ selected })\n      );\n      return;\n    }\n\n    const { labels } = this.props;\n\n    const labelIdx = labels.findIndex(label => label.id === selected);\n    const type = labels[labelIdx].type;\n    const color = colors[labelIdx];\n\n    pushState(\n      state => ({\n        unfinishedFigure: {\n          id: null,\n          color,\n          type,\n          points: [],\n        },\n      }),\n      () => this.setState({ selected })\n    );\n  }\n\n  handleSelectionChange(figureId) {\n    if (figureId) {\n      this.setState({ selectedFigureId: figureId });\n    } else {\n      this.setState({\n        reassigning: { status: false, type: null },\n        selectedFigureId: null,\n      });\n    }\n  }\n\n  handleChange(eventType, figure, newLabelId) {\n    if (!figure.color) return;\n    const { labels, figures, pushState, height, width, imageData } = this.props;\n    const label =\n      figure.color === 'gray'\n        ? { id: '__temp' }\n        : labels[colors.indexOf(figure.color)];\n    const idx = (figures[label.id] || []).findIndex(f => f.id === figure.id);\n\n    switch (eventType) {\n      case 'new':\n        pushState(\n          state => ({\n            figures: update(state.figures, {\n              [label.id]: {\n                $push: [\n                  {\n                    id: figure.id || genId(),\n                    type: figure.type,\n                    points: figure.points,\n                  },\n                ],\n              },\n            }),\n            unfinishedFigure: null,\n          }),\n          () =>\n            this.setState({\n              selected: null,\n            })\n        );\n        break;\n\n      case 'replace':\n        pushState(state => {\n          let { tracingOptions } = figure;\n          if (tracingOptions && tracingOptions.enabled) {\n            const imageInfo = {\n              height,\n              width,\n              imageData,\n            };\n            tracingOptions = {\n              ...tracingOptions,\n              trace: computeTrace(figure.points, imageInfo, tracingOptions),\n            };\n          } else {\n            tracingOptions = { ...tracingOptions, trace: [] };\n          }\n\n          return {\n            figures: update(state.figures, {\n              [label.id]: {\n                $splice: [\n                  [\n                    idx,\n                    1,\n                    {\n                      id: figure.id,\n                      type: figure.type,\n                      points: figure.points,\n                      tracingOptions,\n                    },\n                  ],\n                ],\n              },\n            }),\n          };\n        });\n        break;\n\n      case 'delete':\n        pushState(state => ({\n          figures: update(state.figures, {\n            [label.id]: {\n              $splice: [[idx, 1]],\n            },\n          }),\n        }));\n        break;\n\n      case 'unfinished':\n        pushState(\n          state => ({ unfinishedFigure: figure }),\n          () => {\n            const { unfinishedFigure } = this.props;\n            const { type, points } = unfinishedFigure;\n            if (type === 'bbox' && points.length >= 2) {\n              this.handleChange('new', unfinishedFigure);\n            }\n          }\n        );\n        break;\n\n      case 'recolor':\n        if (label.id === newLabelId) return;\n        pushState(state => ({\n          figures: update(state.figures, {\n            [label.id]: {\n              $splice: [[idx, 1]],\n            },\n            [newLabelId]: {\n              $push: [\n                {\n                  id: figure.id,\n                  points: figure.points,\n                  type: figure.type,\n                  tracingOptions: figure.tracingOptions,\n                },\n              ],\n            },\n          }),\n        }));\n        break;\n\n      default:\n        throw new Error('unknown event type ' + eventType);\n    }\n  }\n\n  render() {\n    const {\n      labels,\n      imageUrl,\n      reference,\n      onBack,\n      onSkip,\n      onSubmit,\n      pushState,\n      popState,\n      figures,\n      unfinishedFigure,\n      height,\n      width,\n      models,\n      makePrediction,\n    } = this.props;\n    const {\n      selected,\n      selectedFigureId,\n      reassigning,\n      toggles,\n      hotkeysPanel,\n    } = this.state;\n\n    const forwardedProps = {\n      onBack,\n      onSkip,\n      onSubmit,\n      models,\n      makePrediction,\n    };\n\n    let selectedFigure = null;\n    const allFigures = [];\n    labels.forEach((label, i) => {\n      figures[label.id].forEach(figure => {\n        if (\n          toggles[label.id] &&\n          (label.type === 'bbox' || label.type === 'polygon')\n        ) {\n          allFigures.push({\n            color: colors[i],\n            points: figure.points,\n            id: figure.id,\n            type: figure.type,\n            tracingOptions: figure.tracingOptions,\n          });\n\n          if (figure.id === selectedFigureId) {\n            selectedFigure = { ...figure, color: colors[i] };\n          }\n        }\n      });\n    });\n    figures.__temp.forEach(figure => {\n      allFigures.push({\n        color: 'gray',\n        ...figure,\n      });\n    });\n\n    const sidebarProps = reassigning.status\n      ? {\n          title: 'Select the new label',\n          selected: null,\n          onSelect: selected => {\n            const figure = this.canvasRef.current.getSelectedFigure();\n            if (figure) {\n              this.handleChange('recolor', figure, selected);\n            }\n\n            this.setState({ reassigning: { status: false, type: null } });\n          },\n          filter: label => label.type === reassigning.type,\n          labelData: figures,\n        }\n      : {\n          title: 'Labeling',\n          selected,\n          onSelect: this.handleSelected,\n          toggles,\n          onToggle: label =>\n            this.setState({\n              toggles: update(toggles, {\n                [label.id]: { $set: !toggles[label.id] },\n              }),\n            }),\n          openHotkeys: () => this.setState({ hotkeysPanel: true }),\n          onFormChange: (labelId, newValue) =>\n            pushState(state => ({\n              figures: update(figures, { [labelId]: { $set: newValue } }),\n            })),\n          labelData: figures,\n        };\n\n    const hotkeysPanelDOM = hotkeysPanel ? (\n      <HotkeysPanel\n        labels={labels.map(label => label.name)}\n        onClose={() => this.setState({ hotkeysPanel: false })}\n      />\n    ) : null;\n\n    let toolbarDOM = null;\n    const toolbarStyle = {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 10000,\n    };\n\n    if (selectedFigure && selectedFigure.type === 'polygon') {\n      const options = selectedFigure.tracingOptions || {\n        enabled: false,\n        smoothing: 0.3,\n        precision: 0,\n        trace: [],\n      };\n      const handler = (property, value) => {\n        this.handleChange(\n          'replace',\n          update(selectedFigure, {\n            tracingOptions: {\n              $set: update(options, { [property]: { $set: value } }),\n            },\n          })\n        );\n      };\n\n      toolbarDOM = (\n        <PathToolbar style={toolbarStyle} onChange={handler} {...options} />\n      );\n    } else if (!selectedFigure && models.length > 0) {\n      toolbarDOM = (\n        <MakePredictionToolbar\n          style={toolbarStyle}\n          models={models}\n          generate={async (model, options) => {\n            const preds = await makePrediction(model, options);\n            if (model.type !== 'object_classification') {\n              preds.forEach(f => this.handleChange('new', f));\n            }\n          }}\n        />\n      );\n    }\n\n    const demoBar = this.props.demo ? (\n      <div\n        style={{\n          width: '100%',\n          flex: '0 0 auto',\n          background: '#FFD700',\n          padding: '5px 10px',\n          fontWeight: 800,\n          textAlign: 'center',\n        }}\n      >\n        This is a demo page. The changes will not be saved and all network\n        responses are static.{' '}\n        <a target=\"_blank\" href=\"https://github.com/Slava/label-tool\">\n          GitHub repo\n        </a>\n      </div>\n    ) : null;\n\n    return (\n      <div\n        style={{ display: 'flex', height: '100vh', flexDirection: 'column' }}\n      >\n        {demoBar}\n        <div style={{ display: 'flex', flex: 1, height: '100%' }}>\n          <Hotkeys keyName=\"ctrl+z\" onKeyDown={popState}>\n            <Sidebar\n              labels={labels}\n              {...sidebarProps}\n              {...forwardedProps}\n              style={{ flex: 1, maxWidth: 300 }}\n            />\n            {hotkeysPanelDOM}\n            <div style={{ flex: 4, display: 'flex', flexDirection: 'column' }}>\n              <Reference {...reference} />\n              <div style={{ position: 'relative', height: '100%' }}>\n                {toolbarDOM}\n                <Canvas\n                  url={imageUrl}\n                  height={height}\n                  width={width}\n                  figures={allFigures}\n                  unfinishedFigure={unfinishedFigure}\n                  onChange={this.handleChange}\n                  onReassignment={type =>\n                    this.setState({ reassigning: { status: true, type } })\n                  }\n                  onSelectionChange={this.handleSelectionChange}\n                  ref={this.canvasRef}\n                  style={{ flex: 1 }}\n                />\n              </div>\n            </div>\n          </Hotkeys>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withLoadImageData(withHistory(withPredictions(LabelingApp)));\n","import React, { Component } from 'react';\n\nexport function withLoadImageData(Comp) {\n  return class LoadImageLayer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        height: null,\n        width: null,\n        imageData: null,\n      };\n\n      this.componentDidUpdate({}, this.state);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      const { imageUrl, demo } = this.props;\n\n      if (imageUrl !== prevProps.imageUrl) {\n        const img = new Image();\n        const setState = this.setState.bind(this);\n        img.onload = async function() {\n          const { height, width } = this;\n          setState({ height, width });\n\n          const resetImage = () => {\n            const canvas = document.getElementById('test-canvas');\n            const ctx = canvas.getContext('2d');\n\n            const scale = demo ? 0.5 : Math.min(800, height) / height;\n            const sHeight = Math.floor(scale * height);\n            const sWidth = Math.floor(scale * width);\n            canvas.height = sHeight;\n            canvas.width = sWidth;\n            ctx.imageSmoothingQuality = 'high';\n            ctx.imageSmoothingEnabled = true;\n            ctx.drawImage(img, 0, 0, sWidth, sHeight);\n            const imgB64 = canvas\n              .toDataURL()\n              .substring('data:image/png;base64,'.length);\n\n            canvas.height = height;\n            canvas.width = width;\n            ctx.drawImage(img, 0, 0, width, height);\n            const data = ctx.getImageData(0, 0, width, height).data;\n\n            setState({ imageData: data, imgB64, b64Scaling: scale });\n          };\n\n          if (document.readyState !== 'loading') {\n            resetImage();\n          } else {\n            document.addEventListener('DOMContentLoaded', resetImage);\n          }\n        };\n        img.src = imageUrl;\n      }\n    }\n\n    render() {\n      const { props, state } = this;\n      const { height, width, imageData, imgB64, b64Scaling } = state;\n\n      if (!height) return null;\n\n      return (\n        <Comp\n          height={height}\n          width={width}\n          imageData={imageData}\n          imgB64={imgB64}\n          b64Scaling={b64Scaling}\n          {...props}\n        />\n      );\n    }\n  };\n}\n","import React, { Component } from 'react';\nimport update from 'immutability-helper';\n\nexport function withHistory(Comp) {\n  return class HistoryLayer extends Component {\n    constructor(props) {\n      super(props);\n\n      const { labelData, labels } = props;\n      let figures = {};\n\n      labels.map(label => (figures[label.id] = []));\n      figures.__temp = [];\n      Object.keys(labelData).forEach(key => {\n        figures[key] = (figures[key] || []).concat(labelData[key]);\n      });\n      figures = this.flipY(figures);\n      this.state = {\n        figures, // mapping from label name to a list of Figure structures\n        unfinishedFigure: null,\n        figuresHistory: [],\n        unfinishedFigureHistory: [],\n      };\n\n      this.pushState = this.pushState.bind(this);\n      this.popState = this.popState.bind(this);\n    }\n\n    flipY(figures) {\n      // flip the y-coordinate\n      const f = {};\n      Object.keys(figures).forEach(label => {\n        f[label] = figures[label].map(figure => {\n          if (figure.type !== 'polygon' && figure.type !== 'bbox')\n            return figure;\n\n          let tracingOptions;\n          if (figure.tracingOptions && figure.tracingOptions.enabled) {\n            tracingOptions = {\n              ...figure.tracingOptions,\n              trace: this.transformPoints(figure.tracingOptions.trace),\n            };\n          } else {\n            tracingOptions = figure.tracingOptions;\n          }\n\n          return {\n            ...figure,\n            points: this.transformPoints(figure.points),\n            tracingOptions,\n          };\n        });\n      });\n      return f;\n    }\n\n    transformPoints(points) {\n      const { height } = this.props;\n      return points.map(({ lat, lng }) => ({\n        lat: height - lat,\n        lng,\n      }));\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      const { onLabelChange, height, width } = this.props;\n      const { figures } = this.state;\n\n      if (figures !== prevState.figures) {\n        onLabelChange({\n          labels: this.flipY(figures),\n          height,\n          width,\n        });\n      }\n    }\n\n    pushState(stateChange, cb) {\n      this.setState(\n        state => ({\n          figuresHistory: update(state.figuresHistory, {\n            $push: [state.figures],\n          }),\n          unfinishedFigureHistory: update(state.unfinishedFigureHistory, {\n            $push: [state.unfinishedFigure],\n          }),\n          ...stateChange(state),\n        }),\n        cb\n      );\n    }\n\n    popState() {\n      this.setState(state => {\n        let { figuresHistory, unfinishedFigureHistory } = state;\n        if (!figuresHistory.length) {\n          return {};\n        }\n\n        figuresHistory = figuresHistory.slice();\n        unfinishedFigureHistory = unfinishedFigureHistory.slice();\n        const figures = figuresHistory.pop();\n        let unfinishedFigure = unfinishedFigureHistory.pop();\n\n        if (unfinishedFigure && !unfinishedFigure.points.length) {\n          unfinishedFigure = null;\n        }\n\n        return {\n          figures,\n          unfinishedFigure,\n          figuresHistory,\n          unfinishedFigureHistory,\n        };\n      });\n    }\n\n    render() {\n      const { props, state, pushState, popState } = this;\n      const { figures, unfinishedFigure } = state;\n      const passedProps = {\n        pushState,\n        popState,\n        figures,\n        unfinishedFigure,\n      };\n      return <Comp {...passedProps} {...props} />;\n    }\n  };\n}\n","import demoImg from './demo-assets/demo.jpg';\nimport semanticSegmentationResponse from './demo-assets/semantic-segmentation.json.resp';\nimport objectDetectionResponse from './demo-assets/object-detection.json.resp';\n\nexport const demoMocks = {\n  '/api/getLabelingInfo': url => {\n    const points = [\n      { lat: 309.045449970124, lng: 625.3817609078532 },\n      { lat: 389.39416927673574, lng: 636.0189083788734 },\n      { lat: 391.74775348325585, lng: 630.3874266468058 },\n      { lat: 418.2995456637876, lng: 649.6483578597326 },\n      { lat: 442.7837802564911, lng: 650.5189084230287 },\n      { lat: 456.5065601296597, lng: 656.2611489389324 },\n      { lat: 457.14786455087716, lng: 675.4384182973803 },\n      { lat: 427.1138701171609, lng: 687.190850901878 },\n      { lat: 416.01435043513527, lng: 680.9881781383931 },\n      { lat: 404.63825712075703, lng: 700.754498022768 },\n      { lat: 348.10066020274917, lng: 706.2554371527104 },\n      { lat: 307.3043488435318, lng: 713.6338242619977 },\n      { lat: 297.63517780645657, lng: 707.2677077164033 },\n      { lat: 301.754589002519, lng: 699.4873776084357 },\n      { lat: 343.34918202031685, lng: 694.0881597393285 },\n      { lat: 263.2327265766655, lng: 699.2697399676117 },\n      { lat: 226.99605937946436, lng: 680.4440840363329 },\n      { lat: 193.5886815129756, lng: 683.2733733670453 },\n      { lat: 194.45923207627172, lng: 663.7948045132946 },\n      { lat: 252.89493863752404, lng: 653.5658353945652 },\n      { lat: 282.2760201487682, lng: 653.7834730353892 },\n      { lat: 278.79381789558374, lng: 625.9258550099132 },\n    ].map(({ lat, lng }) => ({ lat: 700 - lat, lng }));\n    const points2 = [\n      { lat: 200.46477246638622, lng: 770.3928381027434 },\n      { lat: 202.93964620053913, lng: 761.9075567285049 },\n      { lat: 213.72302461363398, lng: 760.4933431661318 },\n      { lat: 226.62772337028846, lng: 764.9127605485477 },\n      { lat: 275.7716446627535, lng: 754.1293821354528 },\n      { lat: 344.8913325237385, lng: 759.432682994352 },\n      { lat: 371.23106012293744, lng: 760.6701198614285 },\n      { lat: 381.48410845014234, lng: 741.5782367693917 },\n      { lat: 400.3992148468825, lng: 743.346003722358 },\n      { lat: 401.63665171395894, lng: 739.2801397305354 },\n      { lat: 436.28488399209976, lng: 750.9474016201134 },\n      { lat: 450.6037963111274, lng: 780.1155563440585 },\n      { lat: 479.41839764447917, lng: 770.5696147980401 },\n      { lat: 493.9140866588034, lng: 778.7013427816854 },\n      { lat: 493.3837565729135, lng: 798.853886045502 },\n      { lat: 483.3074849410052, lng: 808.5766042868171 },\n      { lat: 469.51890270786754, lng: 806.2785072479608 },\n      { lat: 462.2710582007054, lng: 798.853886045502 },\n      { lat: 450.780573006424, lng: 799.5609928266886 },\n      { lat: 440.5275246792191, lng: 828.9059242459302 },\n      { lat: 423.291796887797, lng: 834.386001800126 },\n      { lat: 406.05606909637487, lng: 839.8660793543218 },\n      { lat: 402.3437584951455, lng: 835.0931085813125 },\n      { lat: 379.716341497176, lng: 842.5177297837713 },\n      { lat: 355.85148763213004, lng: 844.2854967367377 },\n      { lat: 346.39393443375997, lng: 847.7326422950221 },\n      { lat: 343.56550730901375, lng: 844.8158268226276 },\n      { lat: 325.35750769346015, lng: 846.6719821232423 },\n      { lat: 319.9658184869127, lng: 841.4570696119915 },\n      { lat: 324.38523586932865, lng: 826.607827207074 },\n      { lat: 336.59783310277044, lng: 834.731484905481 },\n      { lat: 352.07604580659114, lng: 835.3908786715936 },\n      { lat: 369.1758521514147, lng: 829.5128759753552 },\n      { lat: 386.2756584962383, lng: 823.6348732791167 },\n      { lat: 353.38624554456584, lng: 822.2353237918115 },\n      { lat: 317.69773361828294, lng: 825.2676810143062 },\n      { lat: 253.50359574886406, lng: 826.0655287481668 },\n      { lat: 204.2428073372761, lng: 815.8344419242217 },\n      { lat: 190.22242909705494, lng: 826.0655287481668 },\n      { lat: 186.85493641000312, lng: 813.560867074456 },\n      { lat: 189.08564167217213, lng: 801.0562054007453 },\n      { lat: 194.76957879658613, lng: 795.7511974179589 },\n      { lat: 258.42967459002284, lng: 804.087638533766 },\n      { lat: 316.7847624006732, lng: 795.3722682763313 },\n      { lat: 274.99975551549045, lng: 781.1453633343426 },\n      { lat: 238.34643008376008, lng: 783.2465357442481 },\n    ].map(({ lat, lng }) => ({ lat: 700 - lat, lng }));\n    return {\n      ok: true,\n      status: 200,\n      json: async () => {\n        return {\n          project: {\n            id: 'demo',\n            name: 'Test Project',\n            referenceText: null,\n            referenceLink: null,\n            form: {\n              formParts: [\n                {\n                  id: 'mzs64divv',\n                  name: 'Human',\n                  type: 'polygon',\n                },\n                {\n                  id: 'ywx7emnqc',\n                  name: 'Shoes',\n                  type: 'bbox',\n                },\n                {\n                  id: 'qvjf23y51',\n                  name: 'Image quality',\n                  type: 'select-one',\n                  options: ['Bad', 'Okay', 'Excellent'],\n                },\n              ],\n            },\n          },\n          image: {\n            id: 1,\n            originalName: 'demo.jpg',\n            link: demoImg,\n            externalLink: null,\n            localPath: null,\n            labeled: 0,\n            labelData: {\n              labels: {\n                mzs64divv: [\n                  {\n                    id: 'hpctbyvju7k5t68znsphx3',\n                    type: 'polygon',\n                    points,\n                    tracingOptions: {\n                      trace: [],\n                      enabled: false,\n                      smoothing: 1.2,\n                    },\n                  },\n                  {\n                    id: 'hpctbyvju7k5t68znsphx4',\n                    type: 'polygon',\n                    points: points2,\n                    tracingOptions: {\n                      trace: [],\n                      enabled: false,\n                      smoothing: 1.2,\n                    },\n                  },\n                ],\n              },\n            },\n            lastEdited: 1552629203129,\n            projectsId: 'demo',\n          },\n        };\n      },\n    };\n  },\n  '/api/mlmodels': () => {\n    return {\n      ok: 1,\n      status: 200,\n      json: async () => [\n        {\n          id: 1,\n          name: 'object detection - faster_rcnn',\n          url: 'http://someserver.com/v1/models/faster_rcnn:predict',\n          type: 'object_detection',\n        },\n        {\n          id: 2,\n          name: 'semantic segmentation - deeplabv3',\n          url:\n            'http://someserver.com/v1/models/deeplabv3plus_xception65:predict',\n          type: 'semantic_segmentation',\n        },\n      ],\n    };\n  },\n  '/api/mlmodels/1': () => {\n    return fetch(objectDetectionResponse);\n  },\n  '/api/mlmodels/2': () => {\n    return fetch(semanticSegmentationResponse);\n  },\n  '/api/images/1': () => {\n    return {\n      ok: 1,\n      status: 200,\n    };\n  },\n};\n","import React, { Component } from 'react';\nimport LabelingApp from './LabelingApp';\n\nimport { Loader } from 'semantic-ui-react';\nimport DocumentMeta from 'react-document-meta';\n\nimport { demoMocks } from './demo';\n\nexport default class LabelingLoader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      project: null,\n      image: null,\n      isLoaded: false,\n      error: null,\n    };\n  }\n\n  async fetch(...args) {\n    const { projectId } = this.props.match.params;\n    if (projectId === 'demo') {\n      const path = typeof args[0] === 'string' ? args[0] : args[0].pathname;\n      return demoMocks[path](...args);\n    }\n\n    return await fetch(...args);\n  }\n\n  componentDidMount() {\n    this.refetch();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.match.params.imageId !== this.props.match.params.imageId) {\n      this.refetch();\n    }\n  }\n\n  async refetch() {\n    this.setState({\n      isLoaded: false,\n      error: null,\n      project: null,\n      image: null,\n    });\n\n    const { match, history } = this.props;\n    let { projectId, imageId } = match.params;\n\n    try {\n      const a = document.createElement('a');\n      a.setAttribute('href', '/api/getLabelingInfo');\n      const url = new URL(a.href);\n\n      url.searchParams.append('projectId', projectId);\n      if (imageId) {\n        url.searchParams.append('imageId', imageId);\n      }\n\n      const { project, image } = await (await this.fetch(url)).json();\n\n      if (!project) {\n        history.replace(`/label/${projectId}/over`);\n        return;\n      }\n\n      history.replace(`/label/${project.id}/${image.id}`);\n\n      this.setState({\n        isLoaded: true,\n        project,\n        image,\n      });\n    } catch (error) {\n      this.setState({\n        isLoaded: true,\n        error,\n      });\n    }\n  }\n\n  async pushUpdate(labelData) {\n    const { imageId } = this.props.match.params;\n    await this.fetch('/api/images/' + imageId, {\n      method: 'PATCH',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ labelData }),\n    });\n  }\n\n  async markComplete() {\n    const { imageId } = this.props.match.params;\n    await this.fetch('/api/images/' + imageId, {\n      method: 'PATCH',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ labeled: true }),\n    });\n  }\n\n  render() {\n    const { history } = this.props;\n    const { project, image, isLoaded, error } = this.state;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <Loader active inline=\"centered\" />;\n    }\n\n    const title = `Image ${image.id} for project ${project.name} -- Label Tool`;\n\n    const props = {\n      onBack: () => {\n        history.goBack();\n      },\n      onSkip: () => {\n        history.push(`/label/${project.id}/`);\n      },\n      onSubmit: () => {\n        this.markComplete();\n        history.push(`/label/${project.id}/`);\n      },\n      onLabelChange: this.pushUpdate.bind(this),\n    };\n\n    const { referenceLink, referenceText } = project;\n\n    return (\n      <DocumentMeta title={title}>\n        <LabelingApp\n          labels={project.form.formParts}\n          reference={{ referenceLink, referenceText }}\n          labelData={image.labelData.labels || {}}\n          imageUrl={image.link}\n          fetch={this.fetch.bind(this)}\n          demo={project.id === 'demo'}\n          {...props}\n        />\n      </DocumentMeta>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { Message } from 'semantic-ui-react';\n\nexport default class OverScreen extends Component {\n  render() {\n    const { projectId } = this.props.match.params;\n\n    return (\n      <Message style={{ maxWidth: 600, margin: '100px auto' }}>\n        <Message.Header>No more images in this project</Message.Header>\n        <p>\n          To upload more images or view previously tagged ones head to the{' '}\n          <Link to={`/admin/${projectId}`}>admin panel</Link>.\n        </p>\n      </Message>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport { Loader, Checkbox, Button, Header, Table } from 'semantic-ui-react';\n\nimport { AutoSizer, List } from 'react-virtualized';\n\nimport update from 'immutability-helper';\nimport shallowEqualObjects from 'shallow-equal/objects';\n\nexport default class ProjectImages extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      images: [],\n    };\n\n    this.handleLabeled = this.handleLabeled.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.markAllNotLabeled = this.markAllNotLabeled.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const { projectId } = this.props;\n    if (\n      projectId === nextProps.projectId &&\n      shallowEqualObjects(this.state, nextState)\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  async componentDidMount() {\n    this.props.refetchRef(this.refetch.bind(this));\n    await this.refetch();\n  }\n\n  async refetch() {\n    const { projectId } = this.props;\n    try {\n      const images = await (await fetch(\n        '/api/images/?projectId=' + projectId\n      )).json();\n\n      this.setState({\n        isLoaded: true,\n        images,\n      });\n    } catch (error) {\n      this.setState({\n        isLoaded: true,\n        error,\n      });\n    }\n  }\n\n  handleLabeled(imageId, labeled) {\n    const { images } = this.state;\n    const idx = images.findIndex(x => x.id === imageId);\n    this.setState(state => ({\n      images: update(state.images, {\n        $splice: [[idx, 1, { ...state.images[idx], labeled }]],\n      }),\n    }));\n\n    fetch('/api/images/' + imageId, {\n      method: 'PATCH',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ labeled }),\n    });\n  }\n\n  handleDelete(imageId) {\n    const { images } = this.state;\n    const idx = images.findIndex(x => x.id === imageId);\n    this.setState(state => ({\n      images: update(state.images, {\n        $splice: [[idx, 1]],\n      }),\n    }));\n\n    fetch('/api/images/' + imageId, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    });\n  }\n\n  markAllNotLabeled() {\n    const { images } = this.state;\n    images.forEach(image => this.handleLabeled(image.id, false));\n  }\n\n  render() {\n    const { projectId } = this.props;\n    const { error, isLoaded, images } = this.state;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <Loader active inline=\"centered\" />;\n    }\n\n    if (!images.length) {\n      return (\n        <Header className=\"centered\" as=\"h5\">\n          No images, upload images using the form below\n        </Header>\n      );\n    }\n\n    return (\n      <div className=\"project-images\">\n        <Table\n          celled\n          style={{ display: 'flex', flexDirection: 'column', height: 600 }}\n        >\n          <Table.Header style={{ flex: '0 0 auto' }}>\n            <Table.Row style={{ display: 'flex', background: '#f9fafb' }}>\n              <Table.HeaderCell style={columnStyles[0]}>ID</Table.HeaderCell>\n              <Table.HeaderCell style={columnStyles[1]}>\n                Image Link\n              </Table.HeaderCell>\n              <Table.HeaderCell style={columnStyles[2]}>\n                Label Status\n              </Table.HeaderCell>\n              <Table.HeaderCell style={columnStyles[3]}>\n                Actions\n              </Table.HeaderCell>\n              {/* extra header cell to even out the width with a fake scrollbar */}\n              <Table.HeaderCell\n                style={{\n                  flex: '0 0 auto',\n                  opacity: 0,\n                  overflowY: 'scroll',\n                  padding: 0,\n                  border: 0,\n                }}\n              />\n            </Table.Row>\n          </Table.Header>\n          <Table.Body style={{ height: '100%', flex: 1, outline: 0 }}>\n            <AutoSizedList\n              rowHeight={55}\n              rowCount={images.length}\n              style={{ overflowY: 'scroll' }}\n              rowRenderer={({ index, style, key }) => (\n                <Row\n                  key={key}\n                  style={style}\n                  image={images[index]}\n                  projectId={projectId}\n                  onLabeled={this.handleLabeled}\n                  onDelete={this.handleDelete}\n                />\n              )}\n              overscanRowCount={10}\n            />\n          </Table.Body>\n        </Table>\n        <Button\n          style={{ float: 'right' }}\n          icon=\"cancel\"\n          label=\"Mark all images as 'Unlabeled'\"\n          onClick={this.markAllNotLabeled}\n        />\n      </div>\n    );\n  }\n}\n\nconst columnStyles = [\n  { flex: '0 0 80px', lineHeight: '32px' },\n  { flex: '1', lineHeight: '32px' },\n  { flex: '0 0 120px', lineHeight: '32px' },\n  { flex: '0 0 250px', lineHeight: '32px' },\n];\nconst Row = ({ image, projectId, style, onLabeled, onDelete }) => (\n  <Table.Row style={{ ...style, display: 'flex' }}>\n    <Table.Cell style={columnStyles[0]}>{image.id}</Table.Cell>\n    <Table.Cell style={columnStyles[1]}>\n      <a href={image.link}>{image.originalName}</a>\n    </Table.Cell>\n    <Table.Cell style={columnStyles[2]}>\n      <Checkbox\n        checked={!!image.labeled}\n        label=\"Labeled\"\n        onChange={(e, { checked }) => onLabeled(image.id, checked)}\n      />\n    </Table.Cell>\n    <Table.Cell style={columnStyles[3]}>\n      <div>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={`/label/${projectId}/${image.id}`}\n        >\n          <Button icon=\"pencil\" label=\"Edit\" size=\"tiny\" />\n        </a>\n        <Button\n          icon=\"trash\"\n          label=\"Delete\"\n          size=\"tiny\"\n          onClick={() => onDelete(image.id)}\n        />\n      </div>\n    </Table.Cell>\n  </Table.Row>\n);\n\nconst AutoSizedList = props => (\n  <AutoSizer>\n    {({ height, width }) => <List height={height} width={width} {...props} />}\n  </AutoSizer>\n);\n","import React, { Component } from 'react';\n\nimport {\n  Button,\n  Form,\n  Grid,\n  Divider,\n  Message,\n  Segment,\n} from 'semantic-ui-react';\n\nexport default class UploadImages extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      urlsText: '',\n      localPath: '',\n      urlsError: null,\n      localPathError: null,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handlePathSubmit = this.handlePathSubmit.bind(this);\n    this.handleFilesSubmit = this.handleFilesSubmit.bind(this);\n  }\n\n  handleChange(e, change) {\n    const { name, value } = change;\n    this.setState({\n      [name]: value,\n    });\n  }\n\n  async handleSubmit() {\n    const { urlsText } = this.state;\n    const { projectId } = this.props;\n\n    if (!urlsText) return;\n\n    const urls = urlsText\n      .trim()\n      .split('\\n')\n      .filter(line => line !== '');\n\n    const resp = await fetch('/api/images/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        projectId,\n        urls,\n      }),\n    });\n\n    if (!resp.ok) {\n      this.setState({\n        urlsError: (await resp.json()).message,\n      });\n      return;\n    }\n\n    this.setState({\n      urlsError: null,\n    });\n\n    this.props.onChange();\n    this.setState({ urlsText: '' });\n  }\n\n  async handleFilesSubmit(e) {\n    e.preventDefault();\n\n    const form = e.target;\n    const formData = new FormData(form);\n\n    await fetch('/api/uploads/' + this.props.projectId, {\n      method: 'POST',\n      body: formData,\n    });\n\n    this.props.onChange();\n\n    form.reset();\n  }\n\n  async handlePathSubmit(e) {\n    e.preventDefault();\n\n    const form = e.target;\n    const { localPath } = this.state;\n    const { projectId } = this.props;\n\n    if (!localPath) return;\n\n    const resp = await fetch('/api/images/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        projectId,\n        localPath,\n      }),\n    });\n    if (!resp.ok) {\n      this.setState({\n        localPathError: (await resp.json()).message,\n      });\n      return;\n    }\n\n    this.setState({\n      localPathError: null,\n    });\n    this.props.onChange();\n\n    form.reset();\n  }\n\n  render() {\n    const { urlsText, urlsError, localPath, localPathError } = this.state;\n\n    const urlsMessage = urlsError ? (\n      <Message negative>{urlsError}</Message>\n    ) : null;\n    const localPathMessage = localPathError ? (\n      <Message negative>{localPathError}</Message>\n    ) : null;\n\n    return (\n      <Segment>\n        <Grid columns={3} relaxed=\"very\" stackable>\n          <Grid.Column>\n            <Form\n              method=\"post\"\n              encType=\"multipart/form-data\"\n              onSubmit={this.handleFilesSubmit}\n            >\n              <Form.Input\n                label=\"Upload files from disk\"\n                multiple\n                type=\"file\"\n                id=\"images\"\n                name=\"images\"\n                accept=\".jpg, .jpeg, .png\"\n              />\n              <Button type=\"submit\">Upload</Button>\n            </Form>\n          </Grid.Column>\n\n          <Grid.Column verticalAlign=\"middle\">\n            <Form onSubmit={this.handleSubmit}>\n              <Form.TextArea\n                name=\"urlsText\"\n                label=\"Images URLs\"\n                placeholder=\"One URL per line i.e. https://images.com/cat.jpg\"\n                rows=\"3\"\n                value={urlsText}\n                onChange={this.handleChange}\n              />\n              <Button>Source from URLs</Button>\n            </Form>\n            {urlsMessage}\n          </Grid.Column>\n          <Grid.Column>\n            <Form onSubmit={this.handlePathSubmit}>\n              <Form.Input\n                name=\"localPath\"\n                label=\"Server's filesystem path\"\n                placeholder=\"i.e. /mnt/image-server/project-files/\"\n                value={localPath}\n                onChange={this.handleChange}\n              />\n              <Button>Source from server's filesystem</Button>\n            </Form>\n            {localPathMessage}\n          </Grid.Column>\n        </Grid>\n\n        <Divider vertical style={{ left: '33%' }}>\n          Or\n        </Divider>\n        <Divider vertical style={{ left: '66%' }}>\n          Or\n        </Divider>\n      </Segment>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  Form,\n  Input,\n  Icon,\n  Button,\n  Checkbox,\n  Radio,\n  Header,\n} from 'semantic-ui-react';\n\nimport { sortableHandle } from 'react-sortable-hoc';\n\nimport update from 'immutability-helper';\n\nfunction renderExtraConfig({ value, onChange }) {\n  if (value.type === 'text') {\n    return (\n      <Input\n        label=\"Input box prompt\"\n        className=\"visible\"\n        placeholder=\"Ex.: 'car brand and model'\"\n        onChange={(e, data) =>\n          onChange(value, { ...value, prompt: data.value })\n        }\n      />\n    );\n  }\n\n  if (value.type === 'select' || value.type === 'select-one') {\n    const options = value.options || [];\n    const Comp = value.type === 'select' ? Checkbox : Radio;\n\n    const renderedOptions = options.map((optionText, index) => (\n      <div key={index} className=\"form-checkbox\">\n        <Comp checked={false} tabIndex=\"-1\" />\n        <Input\n          style={{ top: '-3px' }}\n          value={optionText}\n          size=\"small\"\n          onChange={(e, data) =>\n            onChange(value, {\n              ...value,\n              options: update(options, { $splice: [[index, 1, data.value]] }),\n            })\n          }\n        />\n        <Button\n          type=\"button\"\n          icon=\"trash\"\n          style={{ background: 'transparent' }}\n          onClick={() =>\n            onChange(value, {\n              ...value,\n              options: update(options, { $splice: [[index, 1]] }),\n            })\n          }\n        />\n      </div>\n    ));\n\n    return (\n      <div>\n        <Header as=\"h5\">Options:</Header>\n        {renderedOptions}\n        <Button\n          type=\"button\"\n          size=\"mini\"\n          circular\n          icon=\"plus\"\n          onClick={() =>\n            onChange(value, {\n              ...value,\n              options: update(options, { $push: ['Option'] }),\n            })\n          }\n        />\n      </div>\n    );\n  }\n  return null;\n}\n\nexport default function LabelFormItem({ value, onChange }) {\n  const options = [\n    { key: 'bbox', text: 'Draw a bounding box', value: 'bbox' },\n    { key: 'polygon', text: 'Draw a polygon figure', value: 'polygon' },\n    { key: 'text', text: 'Enter a text label', value: 'text' },\n    { key: 'select', text: 'Select all tags that apply', value: 'select' },\n    {\n      key: 'select-one',\n      text: 'Select one tag that applies',\n      value: 'select-one',\n    },\n  ];\n\n  const extraConfig = renderExtraConfig({ value, onChange });\n\n  return (\n    <div\n      style={{\n        marginTop: '0.7em',\n        padding: '1em',\n        border: 'solid 1px #efefef',\n        background: 'white',\n        shadow: 'rgb(204, 204, 204) 0px 1px 2px',\n      }}\n    >\n      <Form className=\"form-card\" style={{ display: 'flex' }}>\n        <DragHandle style={{ flex: 0, marginTop: 9 }} />\n        <div style={{ flex: 1, padding: '0 0.5em' }}>\n          <Form.Field\n            placeholder=\"Label name\"\n            control=\"input\"\n            defaultValue={value.name}\n            style={{ padding: 3, fontSize: 24 }}\n            onChange={e => onChange(value, { ...value, name: e.target.value })}\n          />\n          <Form.Select\n            label=\"Label type\"\n            options={options}\n            defaultValue={value.type}\n            onChange={(e, change) =>\n              onChange(value, { ...value, type: change.value })\n            }\n            style={{ maxWidth: 400 }}\n          />\n          {extraConfig}\n        </div>\n        <div style={{ flex: '0 0 auto' }}>\n          <Button\n            type=\"button\"\n            style={{ background: 'transparent', padding: 0 }}\n            onClick={() => onChange(value, null)}\n          >\n            <Icon name=\"trash\" />\n          </Button>\n        </div>\n      </Form>\n    </div>\n  );\n}\n\nconst dragHandleStyle = {\n  background:\n    'linear-gradient(180deg,#000,#000 20%,#fff 0,#fff 40%,#000 0,#000 60%,#fff 0,#fff 80%,#000 0,#000)',\n  width: 25,\n  minWidth: 25,\n  height: 20,\n  opacity: 0.25,\n  cursor: 'move',\n};\nconst DragHandle = sortableHandle(({ style }) => (\n  <div style={{ ...dragHandleStyle, ...style }} />\n));\n","import React, { Component } from 'react';\n\nimport { Form, Segment, Button, Loader } from 'semantic-ui-react';\n\nexport default class ImportData extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: null,\n      loading: false,\n    };\n    this.handleFilesSubmit = this.handleFilesSubmit.bind(this);\n  }\n\n  async handleFilesSubmit(e) {\n    e.preventDefault();\n\n    const form = e.target;\n    const formData = new FormData(form);\n\n    this.setState({ message: null });\n    const res = await fetch('/api/import/' + this.props.projectId, {\n      method: 'POST',\n      body: formData,\n    });\n    const { message } = await res.json();\n    this.setState({\n      message,\n      loading: false,\n    });\n\n    form.reset();\n    this.props.onChange();\n  }\n\n  render() {\n    const { message, loading } = this.state;\n    const loader = loading ? <Loader /> : null;\n    const messages = (message || '').split('\\n').map(m => <div>{m}</div>);\n\n    return (\n      <Segment>\n        <p>\n          Import image labels exported from tools like{' '}\n          <a href=\"https://labelbox.com\">LabelBox</a>.\n        </p>\n        <p>\n          The files must be formatted as a valid JSON, with corresponding image\n          name in the \"imagePath\" field.\n        </p>\n        <p>\n          Objects from the \"shapes\" field will be imported as polygons with\n          corresponding labels created.\n        </p>\n        <Form\n          method=\"post\"\n          encType=\"multipart/form-data\"\n          onSubmit={this.handleFilesSubmit}\n        >\n          <Form.Input\n            label=\"Select JSON files\"\n            multiple\n            type=\"file\"\n            id=\"files\"\n            name=\"files\"\n            accept=\".json\"\n          />\n          <Button type=\"submit\">Import</Button>\n        </Form>\n        {loader}\n        <div style={{ marginTop: '2em' }}>{messages}</div>\n      </Segment>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport {\n  Header,\n  Divider,\n  Form,\n  Message,\n  Segment,\n  Button,\n} from 'semantic-ui-react';\n\nexport default class UploadReference extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadError: null,\n    };\n\n    this.handleFileSubmit = this.handleFileSubmit.bind(this);\n  }\n\n  async handleFileSubmit(e) {\n    e.preventDefault();\n\n    const form = e.target;\n    const formData = new FormData(form);\n\n    const resp = await fetch(\n      '/api/uploads/' + this.props.project.id + '/reference',\n      {\n        method: 'POST',\n        body: formData,\n      }\n    );\n\n    if (!resp.ok) {\n      this.setState({\n        uploadError: (await resp.json()).message,\n      });\n      return;\n    }\n\n    this.setState({\n      uploadError: null,\n    });\n\n    form.reset();\n    this.props.onUpload();\n  }\n\n  render() {\n    const { uploadError } = this.state;\n    const { onChange, project } = this.props;\n    const { referenceText, referenceLink } = project;\n\n    const uploadErrorMessage = uploadError ? (\n      <Message negative>{uploadError}</Message>\n    ) : null;\n\n    let preview = null;\n    if (referenceText || referenceLink) {\n      const img = referenceLink ? (\n        <div style={{ position: 'relative' }}>\n          <img\n            alt=\"Reference\"\n            style={{ width: 'auto', maxWidth: '100%' }}\n            src={referenceLink}\n          />\n          <Button\n            icon=\"trash\"\n            size=\"tiny\"\n            label=\"Delete\"\n            style={{ position: 'absolute', top: 0, right: -125 }}\n            onClick={() => onChange({ referenceText, referenceLink: null })}\n          />\n        </div>\n      ) : null;\n      preview = (\n        <div>\n          <Header>Preview</Header>\n          <p>\n            This is what the reference image and text would look like on the top\n            of the labeling page:\n          </p>\n          <Segment>\n            {img}\n            {referenceText}\n          </Segment>\n          <Divider />\n        </div>\n      );\n    }\n\n    return (\n      <Segment>\n        {preview}\n        <Form\n          method=\"post\"\n          encType=\"multipart/form-data\"\n          onSubmit={this.handleFileSubmit}\n        >\n          <Form.Input\n            label=\"Upload image from disk\"\n            type=\"file\"\n            id=\"referenceImage\"\n            name=\"referenceImage\"\n            accept=\".jpg, .jpeg, .png\"\n            action=\"Upload\"\n            style={{ maxWidth: 600 }}\n          />\n        </Form>\n        {uploadErrorMessage}\n        <Form style={{ marginTop: '1em', maxWidth: 600 }}>\n          <Form.TextArea\n            autoHeight\n            label=\"Reference Text\"\n            placeholder=\"Instructions, descriptions, etc\"\n            defaultValue={referenceText}\n            onChange={(e, { value }) =>\n              onChange({ referenceText: value, referenceLink })\n            }\n          />\n        </Form>\n        <Divider />\n        <p>\n          The reference information (image and/or text) will be shown on top of\n          the labeling interface to give the labelers more instruction on how to\n          label or something to compare to (image of the key colors, reference\n          images, etc).\n        </p>\n      </Segment>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport {\n  Header,\n  Form,\n  Segment,\n  Table,\n  Button,\n  Loader,\n} from 'semantic-ui-react';\n\nconst options = [\n  { value: 'object_detection', text: 'Object Detection' },\n  { value: 'object_classification', text: 'Object Classification' },\n  { value: 'semantic_segmentation', text: 'Semantic Segmentation' },\n];\n\nconst inputFormat = `\n{\n  \"instances\": [\n    {\n      \"input_bytes\": {\n        \"b64\": \"<str>\"\n      }\n    }\n  ]\n}\n`;\n\nconst outputFormats = {\n  object_detection: `\n{\n  \"predictions\": [\n    {\n       \"det_boxes\": [<ymin>, <xmin>, <ymax>, <xmax>],\n       \"det_class\": <str>,\n       \"det_score\": <0 ~ 1 floating number\n    },\n    ...,\n    ...\n    ]\n}\n`,\n  object_classification: `\n{\n  \"predictions\": [[<str>, <str>, <str>, <str>, <str>]]\n}\n`,\n  semantic_segmentation: `\n{\n  \"predictions\": [[...], [...], [...], ...]\n}\n`,\n};\n\nexport default class MLAssist extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      models: null,\n      currentValue: options[0].value,\n      url: null,\n      name: null,\n    };\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  componentDidMount() {\n    this.reload();\n  }\n\n  async reload() {\n    try {\n      const models = await (await fetch('/api/mlmodels/')).json();\n      this.setState({\n        isLoaded: true,\n        error: null,\n        models,\n      });\n    } catch (error) {\n      this.setState({\n        isLoaded: true,\n        error,\n      });\n    }\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    const form = e.target;\n\n    const type = this.state.currentValue;\n    const { url, name } = this.state;\n    await fetch('/api/mlmodels/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        model: {\n          url,\n          name,\n          type,\n        },\n      }),\n    });\n\n    form.reset();\n    this.reload();\n  }\n\n  async onDelete(id) {\n    await fetch('/api/mlmodels/' + id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    this.reload();\n  }\n\n  render() {\n    const { error, isLoaded, models, currentValue } = this.state;\n    const value = currentValue;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <Loader active inline=\"centered\" />;\n    }\n\n    const emptyMessage = models.length ? null : (\n      <div style={{ textAlign: 'center', padding: '3em' }}>\n        No end-points, add one below\n      </div>\n    );\n\n    return (\n      <Segment>\n        <Header as=\"h2\">Available end-points</Header>\n        <Table>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>Name</Table.HeaderCell>\n              <Table.HeaderCell>URL</Table.HeaderCell>\n              <Table.HeaderCell>Type</Table.HeaderCell>\n              <Table.HeaderCell>Actions</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {(models || []).map(({ id, name, url, type }) => (\n              <Table.Row key={id}>\n                <Table.Cell>{name}</Table.Cell>\n                <Table.Cell>{url}</Table.Cell>\n                <Table.Cell>{type}</Table.Cell>\n                <Table.Cell>\n                  <Button\n                    icon=\"trash\"\n                    label=\"Delete\"\n                    size=\"tiny\"\n                    onClick={() => this.onDelete(id)}\n                  />\n                </Table.Cell>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n        {emptyMessage}\n        <div style={{ marginTop: '2em' }}>\n          <Header as=\"h2\">Add a new end-point</Header>\n          <Form style={{ maxWidth: 600 }}>\n            <Form.Select\n              label=\"Model type\"\n              options={options}\n              value={value}\n              onChange={(e, { value }) =>\n                this.setState({ currentValue: value })\n              }\n            />\n          </Form>\n          <Header as=\"h3\">Expected API format</Header>\n          <Table>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Input Format</Table.HeaderCell>\n                <Table.HeaderCell>Output Format</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              <Table.Row>\n                <Table.Cell>\n                  <pre>{inputFormat}</pre>\n                </Table.Cell>\n                <Table.Cell>\n                  <pre>{outputFormats[value]}</pre>\n                </Table.Cell>\n              </Table.Row>\n            </Table.Body>\n          </Table>\n\n          <Form style={{ maxWidth: 600 }} onSubmit={this.onSubmit}>\n            <Form.Input\n              label=\"Display Name\"\n              placeholder=\"my_model\"\n              onChange={(e, { value }) => this.setState({ name: value })}\n            />\n            <Form.Input\n              label=\"URL\"\n              placeholder=\"http://host:port/v1/models/{MODEL_NAME}:predict\"\n              onChange={(e, { value }) => this.setState({ url: value })}\n            />\n            <Button type=\"submit\">Add</Button>\n          </Form>\n        </div>\n      </Segment>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport {\n  Header,\n  Button,\n  Loader,\n  Input,\n  List,\n  Segment,\n} from 'semantic-ui-react';\n\nimport DocumentMeta from 'react-document-meta';\n\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\n\nimport update from 'immutability-helper';\nimport arrayMove from 'array-move';\n\nimport ProjectImages from './ProjectImages';\nimport UploadImages from './UploadImages';\nimport LabelFormItem from './LabelFormItem';\nimport ImportData from './ImportData';\nimport UploadReference from './UploadReference';\nimport MLAssist from './MLAssist';\n\nexport default class ProjectPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      project: null,\n    };\n\n    this.onSortEnd = this.onSortEnd.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleNew = this.handleNew.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleNameChange = this.handleNameChange.bind(this);\n    this.handleReferenceChange = this.handleReferenceChange.bind(this);\n  }\n\n  async componentDidMount() {\n    const { match } = this.props;\n    const { projectId } = match.params;\n    try {\n      const project = await (await fetch('/api/projects/' + projectId)).json();\n      this.setState({\n        isLoaded: true,\n        project,\n      });\n    } catch (error) {\n      this.setState({\n        isLoaded: true,\n        error,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { project } = this.state;\n    if (!project) return;\n    const { projectId } = this.props.match.params;\n\n    if (prevState.project !== project) {\n      fetch('/api/projects/' + projectId, {\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        method: 'PATCH',\n        body: JSON.stringify({ project }),\n      });\n    }\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.setState(({ project }) => ({\n      project: update(project, {\n        form: {\n          formParts: {\n            $set: arrayMove(project.form.formParts, oldIndex, newIndex),\n          },\n        },\n      }),\n    }));\n  }\n\n  handleChange(oldValue, newValue) {\n    const { project } = this.state;\n    const edit = newValue ? [1, newValue] : [1];\n    this.setState({\n      project: update(project, {\n        form: {\n          formParts: {\n            $splice: [\n              [\n                project.form.formParts.findIndex(x => x.id === oldValue.id),\n                ...edit,\n              ],\n            ],\n          },\n        },\n      }),\n    });\n  }\n\n  handleNew() {\n    const { project } = this.state;\n    this.setState({\n      project: update(project, {\n        form: {\n          formParts: {\n            $push: [newFormPart()],\n          },\n        },\n      }),\n    });\n  }\n\n  async handleDelete() {\n    const { match, history } = this.props;\n    const { projectId } = match.params;\n    await fetch('/api/projects/' + projectId, {\n      method: 'DELETE',\n    });\n\n    history.push('/admin/');\n  }\n\n  handleNameChange(e) {\n    const { value } = e.target;\n    const { project } = this.state;\n    this.setState({\n      project: update(project, {\n        name: {\n          $set: value,\n        },\n      }),\n    });\n  }\n\n  handleReferenceChange({ referenceLink, referenceText }) {\n    const { project } = this.state;\n    this.setState({\n      project: update(project, {\n        referenceText: {\n          $set: referenceText,\n        },\n        referenceLink: {\n          $set: referenceLink,\n        },\n      }),\n    });\n  }\n\n  render() {\n    const { match } = this.props;\n    const { projectId } = match.params;\n\n    const { error, isLoaded, project } = this.state;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <Loader active inline=\"centered\" />;\n    }\n\n    const items = project.form.formParts;\n    const renderedItems = items.length ? (\n      items.map((value, index) => (\n        <SortableItem\n          key={value.id}\n          index={index}\n          value={value}\n          onChange={this.handleChange}\n        />\n      ))\n    ) : (\n      <Header className=\"centered\" as=\"h5\">\n        No labels, add labels using the plus button below\n      </Header>\n    );\n\n    return (\n      <DocumentMeta title={`Edit project ${project.name}`}>\n        <div style={{ display: 'flex' }}>\n          <div className=\"ui\" style={{ paddingBottom: 200, flex: 1 }}>\n            <Input\n              placeholder=\"Project name\"\n              control=\"input\"\n              defaultValue={project.name}\n              style={{ fontSize: 24, width: '100%', marginTop: 10 }}\n              onChange={this.handleNameChange}\n            />\n            <div\n              style={{\n                display: 'flex',\n                flexDirection: 'row-reverse',\n                marginTop: 5,\n              }}\n            >\n              <Input\n                label=\"Labeling link\"\n                value={window.location.origin + '/label/' + projectId}\n                onClick={e => e.target.select()}\n              />\n            </div>\n            <div id=\"labels\" style={{ padding: '2em 0 110px 0' }}>\n              <Header disabled>LABELS</Header>\n              <SortableContainer onSortEnd={this.onSortEnd} useDragHandle>\n                {renderedItems}\n              </SortableContainer>\n              <Button\n                circular\n                icon=\"plus\"\n                size=\"massive\"\n                style={{ float: 'right', marginTop: '2em' }}\n                onClick={this.handleNew}\n              />\n            </div>\n            <div id=\"images\" style={{ padding: '2em 0' }}>\n              <Header disabled>IMAGES</Header>\n              <ProjectImages\n                projectId={projectId}\n                refetchRef={f => this.setState({ handleImagesChange: f })}\n              />\n            </div>\n            <div id=\"upload-images\" style={{ padding: '2em 0' }}>\n              <Header disabled>UPLOAD IMAGES</Header>\n              <UploadImages\n                projectId={projectId}\n                onChange={this.state.handleImagesChange}\n              />\n            </div>\n            <div id=\"import-data\" style={{ padding: '2em 0' }}>\n              <Header disabled>IMPORT DATA</Header>\n              <ImportData\n                projectId={projectId}\n                onChange={() => {\n                  this.state.handleImagesChange();\n                  this.componentDidMount();\n                }}\n              />\n            </div>\n            <div id=\"export-data\" style={{ padding: '2em 0' }}>\n              <Header disabled>EXPORT DATA</Header>\n              <a href={`/api/projects/${projectId}/export`}>\n                <Button\n                  icon=\"download\"\n                  label=\"Download a zip-file with JSON-encoded labels\"\n                />\n              </a>\n            </div>\n            <div id=\"reference-information\" style={{ padding: '2em 0' }}>\n              <Header disabled>REFERENCE INFORMATION</Header>\n              <UploadReference\n                project={project}\n                onChange={this.handleReferenceChange}\n                onUpload={() => this.componentDidMount()}\n              />\n            </div>\n            <div id=\"ml-assistance\" style={{ padding: '2em 0' }}>\n              <Header disabled>ML ASSISTANCE MODELS</Header>\n              <MLAssist />\n            </div>\n            <div id=\"delete-project\" style={{ padding: '2em 0' }}>\n              <Header disabled>DELETE PROJECT</Header>\n              <p>\n                The button bellow will delete all metadata about labels, images\n                and the project.\n              </p>\n              <Button negative onClick={this.handleDelete}>\n                Delete project\n              </Button>\n            </div>\n          </div>\n          <Segment\n            style={{\n              flex: '0 0 auto',\n              width: 200,\n              position: 'sticky',\n              top: 65,\n              alignSelf: 'flex-start',\n              marginTop: 0,\n              marginLeft: 30,\n              boxShadow: '0 0 #FFFFFF',\n            }}\n          >\n            <Header as=\"h4\">On this page:</Header>\n            <List>\n              <List.Item>\n                <a href=\"#labels\">Labels</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#images\">Images</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#upload-images\">Upload Images</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#import-data\">Import data</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#export-data\">Export data</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#reference-information\">Reference Info</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#ml-assistance\">ML Assistance</a>\n              </List.Item>\n              <List.Item>\n                <a href=\"#delete-project\">Delete Project</a>\n              </List.Item>\n            </List>\n          </Segment>\n        </div>\n      </DocumentMeta>\n    );\n  }\n}\n\nconst SortableItem = sortableElement(LabelFormItem);\n\nconst SortableContainer = sortableContainer(({ children }) => {\n  return <div>{children}</div>;\n});\n\nconst newFormPart = () => {\n  const id = Math.random()\n    .toString(36)\n    .substr(2, 9);\n  return {\n    id,\n    name: 'New label',\n    type: 'bbox',\n  };\n};\n","import React, { Component } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport './AdminApp.css';\nimport Menubar from '../common/Menubar';\nimport ProjectsGrid from '../common/ProjectsGrid';\nimport ProjectPage from './ProjectPage';\n\nclass AdminApp extends Component {\n  render() {\n    return (\n      <Menubar active=\"admin\">\n        <Switch>\n          <Route\n            exact\n            path=\"/admin/\"\n            render={() => (\n              <ProjectsGrid\n                linkPrefix=\"/admin/\"\n                title=\"Edit Projects:\"\n                newButton={true}\n              />\n            )}\n          />\n          <Route path=\"/admin/:projectId\" component={ProjectPage} />\n        </Switch>\n      </Menubar>\n    );\n  }\n}\n\nexport default AdminApp;\n","import React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport DocumentMeta from 'react-document-meta';\n\nimport { Header, List, Icon, Label } from 'semantic-ui-react';\n\nimport Menubar from '../common/Menubar';\n\nimport labelingInterfaceAnnotatedImg from './tutorial/labeling-interface-annotated.png';\nimport labelsImg from './tutorial/labels.png';\nimport bboxLabelingImg from './tutorial/bbox-labeling.gif';\nimport polygonLabelingImg from './tutorial/polygon-labeling.gif';\nimport addNewPointImg from './tutorial/add-new-point.png';\nimport showAndHideLayerImg from './tutorial/show-and-hide-layer.gif';\nimport changeLayerImg from './tutorial/change-layer.gif';\nimport autoTracingImg from './tutorial/auto-tracing.gif';\nimport navImg from './tutorial/nav.png';\nimport toolbarImg from './tutorial/toolbar.png';\nimport mlObjectDescriptionImg from './tutorial/ml-object-description.gif';\nimport mlObjectDetectionImg from './tutorial/ml-object-detection.gif';\nimport mlSemanticSegmentationImg from './tutorial/ml-semantic-segmentation.gif';\n\nimport projectPageImg from './tutorial/project-page.png';\nimport projectImagesImg from './tutorial/project-images.png';\nimport projectDataImg from './tutorial/project-data.png';\nimport projectReferenceImg from './tutorial/project-reference.png';\nimport projectReferenceInterfaceImg from './tutorial/project-reference-interface.png';\nimport projectMlAssistImg from './tutorial/project-ml-assist.png';\n\nfunction Img({ src, caption }) {\n  return (\n    <figure style={{ textAlign: 'center', margin: '1em 1em' }}>\n      <img src={src} alt={caption} />\n      <figcaption style={{ color: '#999', fontSize: '12px' }}>\n        {caption}\n      </figcaption>\n    </figure>\n  );\n}\n\nconst sections = [\n  {\n    id: 'labeling',\n    title: 'How To Label',\n    comp: () => {\n      return (\n        <div>\n          <Header as=\"h1\">How To Label</Header>\n          <p>\n            The labeling interface presents the user with a canvas to create and\n            edit figures overlayed over the image being labeled and the list of\n            labels on the left.\n          </p>\n          <Img\n            src={labelingInterfaceAnnotatedImg}\n            caption=\"Labeling Interface\"\n          />\n\n          <p>\n            Let's examine the sidebar in detail. Each label has a shortcut and a\n            color associated with it. The shortcut is usually a number in the\n            1-9 range. If it is a figure label, pressing the shortcut will\n            activate the drawing mode for the label with the given color.\n          </p>\n          <p>\n            The icon next to the label name indicates a figure label. The{' '}\n            <Icon name=\"pencil\" /> pencil icon indicates a polygon label and the\n            overlapping boxes <Icon name=\"object ungroup\" /> indicate a bounding\n            box.\n          </p>\n          <Img\n            src={labelsImg}\n            caption=\"Sidebar with labels and visibility toggles\"\n          />\n          <p>\n            The toggleable <Icon name=\"eye\" /> eye icon allows to hide or show\n            all figures belonging to the label in the segmentation area.\n          </p>\n          <Img\n            src={showAndHideLayerImg}\n            caption=\"Toggle the eye icon to change the visibility of some label's figures\"\n          />\n\n          <Header as=\"h2\">Adding a New Figure</Header>\n          <p>\n            Start by clicking on a label on the left that is marked either as a\n            polygon label (<Icon name=\"pencil\" /> pencil icon) or as a bounding\n            box label (<Icon name=\"object ungroup\" /> box icon).\n          </p>\n          <p>\n            After selecting a drawing label, you can start outlining a figure by\n            clicking on the segmentation area.\n          </p>\n          <Img\n            src={bboxLabelingImg}\n            caption=\"Adding a figure for a bounding box label\"\n          />\n          <Img\n            src={polygonLabelingImg}\n            caption=\"Adding a figure for a polygon label\"\n          />\n\n          <Header as=\"h2\">Editing a Figure</Header>\n          <p>\n            To edit a figure click on it to select. Now you can move points by\n            dragging them with your mouse.\n          </p>\n          <p>To delete a point, click on it once.</p>\n          <p>\n            To add a new point, click on the transparent white point on the edge\n            where you want the new point to be added. Sometimes if two points\n            are too close to each other, you would need to zoom in more to see\n            the transparent white point.\n          </p>\n          <Img src={addNewPointImg} caption=\"Adding a new point to a figure\" />\n\n          <Header as=\"h2\">Reassigning a Figure to a Different Label</Header>\n          <p>\n            To change the label for a figure, select the figure, then press the{' '}\n            <Label as=\"span\">c</Label> key (shortcut for \"change\"). Then select\n            the new label on the sidebar on the left. You can only select\n            another label of the same type (so you can only change polygons to\n            other polygon labels, for example).\n          </p>\n          <Img\n            src={changeLayerImg}\n            caption=\"Changing the label from green to blue using the 'c' shortcut key\"\n          />\n\n          <Header as=\"h2\">Sumitting the Labeled Image</Header>\n          <p>\n            After you are done labeling the image, click the \"Submit\" button on\n            the sidebar to mark the image as \"labeled\" and load the next\n            labeling task for the project.\n          </p>\n          <Img\n            src={navImg}\n            caption=\"The buttons on the bottom of the sidebar used to get the next labeling task\"\n          />\n          <p>\n            Click \"Skip\" to load a new task without marking the current image as\n            labeled, the labeling progress will be preserved and the image will\n            be assigned again later (possibly to someone else).\n          </p>\n          <p>\n            Every image has a timer. When the time expires, the current labeler\n            is assumed to be idle and the image can get assigned to another\n            labeler. Every time the labels are edited, image's timer is renewed.\n          </p>\n        </div>\n      );\n    },\n  },\n  {\n    id: 'labeling-advanced',\n    title: 'Advanced Labeling',\n    comp: () => {\n      return (\n        <div>\n          <Header as=\"h1\">Advanced Labeling Features</Header>\n          <p>\n            As you get a hang of labeling images there are a couple of more\n            advanced features you could use to make labeling faster.\n          </p>\n          <Header as=\"h2\">Using Auto-Tracing</Header>\n          <p>\n            Sometimes when you need to make a complicated selection following\n            winding paths you could make use of the auto-tracing feature.{' '}\n          </p>\n          <p>\n            Activate auto-tracing for a polygon figure after selecting one. On\n            the toolbar you can configure the algorithm parameters that suit\n            your selection best.\n          </p>\n          <Img\n            src={toolbarImg}\n            caption=\"Toolbar with the ML-based assistance options\"\n          />\n          <Img\n            src={autoTracingImg}\n            caption=\"Using the auto-tracing feature we can make a more complex selection with fewer clicks\"\n          />\n\n          <Header as=\"h2\">Using ML Models</Header>\n          <p>\n            There are 3 types of ML Model-based assistance supported. Object\n            detection and semantic segmentation models can be used to\n            automatically generate the figures unlabeled. The object description\n            models can be used to generate an input for a text field-based\n            label.\n          </p>\n\n          <p>\n            Generally, the figure-generating models can be called from the\n            toolbar that becomes avialabe once one or more ML Models are added\n            in the admin interface.\n          </p>\n          <p>\n            After generating figures you might want to delete the unwanted ones\n            (by selecting them and pressing the <Label>Delete</Label> button) or\n            edit the generated paths.\n          </p>\n\n          <Img\n            src={mlObjectDetectionImg}\n            caption=\"Generating bounding boxes using Object Detection type\"\n          />\n          <Img\n            src={mlSemanticSegmentationImg}\n            caption=\"Generating polygons using Semantic Segmentation type\"\n          />\n          <Img\n            src={mlObjectDescriptionImg}\n            caption=\"Filling in text inputs using Object Description type\"\n          />\n        </div>\n      );\n    },\n  },\n  {\n    id: 'admin',\n    title: 'Managing Projects',\n    comp: () => {\n      return (\n        <div>\n          <Header as=\"h1\">Managing Projects</Header>\n          <p>\n            After creating a project on the{' '}\n            <Link to=\"/admin\">admin panel page</Link> you can edit project's\n            details, edit the labels, upload new images, export or import the\n            labeling data etc.\n          </p>\n\n          <p>\n            You can add a variety of label types, either for image segmentation\n            (bounding box, polygon) or textual information (text input, multiple\n            choice, single choice). Drag the label handles to reorder. Renaming\n            a label doesn't change its internal representation id.\n          </p>\n\n          <Img\n            src={projectPageImg}\n            caption=\"The project page allows you to edit its name, and edit the labels\"\n          />\n\n          <Header as=\"h2\">Images</Header>\n          <p>\n            Next, you can manage all your images, see which ones are labeled,\n            open or delete individual ones.\n          </p>\n          <Img\n            src={projectImagesImg}\n            caption=\"Images management part of the project\"\n          />\n\n          <Header as=\"h2\">Data Management</Header>\n          <p>\n            Following there are the areas where you can: upload images, import\n            labeling data from tools like{' '}\n            <a href=\"https://github.com/wkentaro/labelme\">LabelMe</a>, or export\n            your labeling data in the same format.\n          </p>\n\n          <p>\n            When uploading images from disk, they are stored internally on the\n            server's filesystem. If the other methods are used (URLs, local\n            filesystem path) the files are proxied and never stored internally.\n          </p>\n          <Img\n            src={projectDataImg}\n            caption=\"Upload, import or export your data\"\n          />\n        </div>\n      );\n    },\n  },\n  {\n    id: 'admin-advanced',\n    title: 'Configuring Advanced Features',\n    comp: () => {\n      return (\n        <div>\n          <Header as=\"h1\">Configuring Advanced Features</Header>\n          <p>\n            There are a couple of features that are more specific to use-cases\n            and tasks this app was designed for originally.\n          </p>\n          <Header as=\"h2\">Reference Information</Header>\n          <p>\n            Sometimes the classification task becomes subjective and some\n            instruction text or a reference image is helpful to display to the\n            labelers. For this reason, you can upload a reference image and add\n            a caption text with necessary instructions that will appear on top\n            of the labeling interface.\n          </p>\n          <Img\n            src={projectReferenceImg}\n            caption=\"Adding a reference image and text for a project as an admin\"\n          />\n          <Img\n            src={projectReferenceInterfaceImg}\n            caption=\"What a reference image looks like when displayed for the labelers\"\n          />\n\n          <Header as=\"h2\">Configuring ML-assisted Features</Header>\n          <p>\n            On the bottom of a project page, you can add end-points to the{' '}\n            <a href=\"https://www.tensorflow.org/tfx/guide/serving\">\n              TensorFlow Serving-style\n            </a>{' '}\n            services. For all types of services the image is sent a s\n            base64-encoded png image and depending on the type of the service\n            the app expects a response in a different format. The examples of\n            the request/response exchange are displayed according to the\n            selected type.\n          </p>\n\n          <Img\n            src={projectMlAssistImg}\n            caption=\"Adding end-points to ML services\"\n          />\n        </div>\n      );\n    },\n  },\n  {\n    id: 'security',\n    title: 'Security',\n    comp: () => {\n      return (\n        <div>\n          <Header as=\"h1\">Security</Header>\n          <p>\n            There is <b>no security</b> in the current iteration of the app.\n            There are no user-based permissions, all pages are accessible by\n            anyone.\n          </p>\n          <p>\n            Since this app was originally designed to be used internally, on a\n            virtual private network (local to your corporation or a research\n            group) this project currently lacks features that would make it a\n            fully-fledged service like{' '}\n            <a href=\"https://www.labelbox.com/\">LabelBox</a>.\n          </p>\n        </div>\n      );\n    },\n  },\n];\n\nexport default class Help extends Component {\n  render() {\n    const links = sections.map(section => (\n      <List.Item key={section.id}>\n        <List.Icon name=\"circle\" style={{ opacity: 0.0 }} />\n        <List.Content>\n          <Link to={'/help/' + section.id}>{section.title}</Link>\n        </List.Content>\n      </List.Item>\n    ));\n\n    const renderer = ({ match: { params } }) => {\n      const Comp = sections.find(({ id }) => id === params.id).comp;\n      return <Comp />;\n    };\n\n    const exactRenderer = ({ history }) => {\n      history.replace('/help/labeling');\n      return null;\n    };\n\n    return (\n      <Menubar active=\"help\">\n        <DocumentMeta title=\"Help -- Label Tool\">\n          <div className=\"help-body\" style={{ display: 'flex', marginTop: 30 }}>\n            <List style={{ maxWidth: 200, minHeight: 500 }}>\n              <List.Item>\n                <List.Icon name=\"align left\" />\n                <List.Content>\n                  <Header as=\"h4\">Table of Contents</Header>\n                </List.Content>\n              </List.Item>\n              {links}\n            </List>\n            <div style={{ flex: 1, paddingBottom: '5em', margin: '0 90px' }}>\n              <Route path=\"/help/:id\" render={renderer} />\n              <Route exact path=\"/help\" render={exactRenderer} />\n            </div>\n          </div>\n        </DocumentMeta>\n      </Menubar>\n    );\n  }\n}\n","import React, { Component, Fragment } from 'react';\nimport { Route, Redirect, BrowserRouter as Router } from 'react-router-dom';\n\nimport LabelHome from './label/LabelHome';\nimport LabelingLoader from './label/LabelingLoader';\nimport OverScreen from './label/OverScreen';\nimport AdminApp from './admin/AdminApp';\nimport Help from './help/Help';\n\nclass App extends Component {\n  render() {\n    if (process.env.REACT_APP_DEMO) {\n      const props = {\n        match: {\n          params: {\n            projectId: 'demo',\n            imageId: 1,\n          },\n        },\n        history: {\n          replace: () => {},\n          push: () => {},\n          goBack: () => {},\n          replace: () => {},\n        },\n      };\n      return <LabelingLoader {...props} />;\n    }\n\n    return (\n      <Router>\n        <Fragment>\n          <Route exact path=\"/\" component={LabelHome} />\n          <Route path=\"/admin\" component={AdminApp} />\n          <Route path=\"/help\" component={Help} />\n          <Route exact path=\"/label/:projectId\" component={LabelingLoader} />\n          <Route\n            exact\n            path=\"/label/:projectId/:imageId\"\n            render={props =>\n              props.match.params.imageId === 'over' ? (\n                <OverScreen {...props} />\n              ) : (\n                <LabelingLoader {...props} />\n              )\n            }\n          />\n        </Fragment>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}